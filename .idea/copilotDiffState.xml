<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/ecohand/data/session/UserSession.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/ecohand/data/session/UserSession.kt" />
              <option name="originalContent" value="package com.example.ecohand.data.session&#10;&#10;import android.content.Context&#10;import android.content.SharedPreferences&#10;&#10;class UserSession(context: Context) {&#10;    private val prefs: SharedPreferences = context.getSharedPreferences(&#10;        &quot;ecohand_session&quot;,&#10;        Context.MODE_PRIVATE&#10;    )&#10;&#10;    companion object {&#10;        private const val KEY_USER_ID = &quot;user_id&quot;&#10;        private const val KEY_USERNAME = &quot;username&quot;&#10;        private const val KEY_EMAIL = &quot;email&quot;&#10;        private const val KEY_IS_LOGGED_IN = &quot;is_logged_in&quot;&#10;&#10;        @Volatile&#10;        private var INSTANCE: UserSession? = null&#10;&#10;        fun getInstance(context: Context): UserSession {&#10;            return INSTANCE ?: synchronized(this) {&#10;                INSTANCE ?: UserSession(context.applicationContext).also {&#10;                    INSTANCE = it&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    fun saveUserSession(userId: Int, username: String, email: String) {&#10;        prefs.edit().apply {&#10;            putInt(KEY_USER_ID, userId)&#10;            putString(KEY_USERNAME, username)&#10;            putString(KEY_EMAIL, email)&#10;            putBoolean(KEY_IS_LOGGED_IN, true)&#10;            apply()&#10;        }&#10;    }&#10;&#10;    fun getUserId(): Int {&#10;        return prefs.getInt(KEY_USER_ID, -1)&#10;    }&#10;&#10;    fun getUsername(): String? {&#10;        return prefs.getString(KEY_USERNAME, null)&#10;    }&#10;&#10;    fun getEmail(): String? {&#10;        return prefs.getString(KEY_EMAIL, null)&#10;    }&#10;&#10;    fun isLoggedIn(): Boolean {&#10;        return prefs.getBoolean(KEY_IS_LOGGED_IN, false)&#10;    }&#10;&#10;    fun clearSession() {&#10;        prefs.edit().apply {&#10;            clear()&#10;            apply()&#10;        }&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.example.ecohand.data.session&#13;&#10;&#13;&#10;import android.content.Context&#13;&#10;import android.content.SharedPreferences&#13;&#10;&#13;&#10;class UserSession(context: Context) {&#13;&#10;    private val prefs: SharedPreferences = context.getSharedPreferences(&#13;&#10;        &quot;ecohand_session&quot;,&#13;&#10;        Context.MODE_PRIVATE&#13;&#10;    )&#13;&#10;&#13;&#10;    companion object {&#10;        private const val KEY_USER_ID = &quot;user_id&quot;&#10;        private const val KEY_USERNAME = &quot;username&quot;&#10;        private const val KEY_EMAIL = &quot;email&quot;&#10;        private const val KEY_IS_LOGGED_IN = &quot;is_logged_in&quot;&#10;        private const val KEY_REMEMBER_ME = &quot;remember_me&quot;&#10;&#10;        @Volatile&#10;        private var INSTANCE: UserSession? = null&#10;&#10;        fun getInstance(context: Context): UserSession {&#10;            return INSTANCE ?: synchronized(this) {&#10;                INSTANCE ?: UserSession(context.applicationContext).also {&#10;                    INSTANCE = it&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    fun saveUserSession(userId: Int, username: String, email: String, rememberMe: Boolean = false) {&#10;        prefs.edit().apply {&#10;            putInt(KEY_USER_ID, userId)&#10;            putString(KEY_USERNAME, username)&#10;            putString(KEY_EMAIL, email)&#10;            putBoolean(KEY_IS_LOGGED_IN, true)&#10;            putBoolean(KEY_REMEMBER_ME, rememberMe)&#10;            apply()&#10;        }&#10;    }&#10;    &#10;    fun isRememberMeEnabled(): Boolean {&#10;        return prefs.getBoolean(KEY_REMEMBER_ME, false)&#10;    }&#13;&#10;&#13;&#10;    fun getUserId(): Int {&#13;&#10;        return prefs.getInt(KEY_USER_ID, -1)&#13;&#10;    }&#13;&#10;&#13;&#10;    fun getUsername(): String? {&#13;&#10;        return prefs.getString(KEY_USERNAME, null)&#13;&#10;    }&#13;&#10;&#13;&#10;    fun getEmail(): String? {&#13;&#10;        return prefs.getString(KEY_EMAIL, null)&#13;&#10;    }&#13;&#10;&#13;&#10;    fun isLoggedIn(): Boolean {&#13;&#10;        return prefs.getBoolean(KEY_IS_LOGGED_IN, false)&#13;&#10;    }&#13;&#10;&#13;&#10;    fun clearSession() {&#13;&#10;        prefs.edit().apply {&#13;&#10;            clear()&#13;&#10;            apply()&#13;&#10;        }&#13;&#10;    }&#13;&#10;}&#13;&#10;&#13;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/ecohand/navigation/AppNavigation.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/ecohand/navigation/AppNavigation.kt" />
              <option name="originalContent" value="package com.example.ecohand.navigation&#10;&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.navigation.compose.NavHost&#10;import androidx.navigation.compose.composable&#10;import androidx.navigation.compose.rememberNavController&#10;import com.example.ecohand.data.local.database.EcoHandDatabase&#10;import com.example.ecohand.data.repository.UserRepository&#10;import com.example.ecohand.data.session.UserSession&#10;import com.example.ecohand.presentation.login.LoginScreen&#10;import com.example.ecohand.presentation.login.LoginViewModel&#10;import com.example.ecohand.presentation.main.MainScreen&#10;import com.example.ecohand.presentation.splash.SplashScreen&#10;&#10;@Composable&#10;fun AppNavigation() {&#10;    val navController = rememberNavController()&#10;    val context = LocalContext.current&#10;    &#10;    // Inicializar base de datos, repositorio y sesión&#10;    val database = remember { EcoHandDatabase.getDatabase(context) }&#10;    val userRepository = remember { UserRepository(database.userDao()) }&#10;    val userSession = remember { UserSession.getInstance(context) }&#10;    val loginViewModel = remember { LoginViewModel(userRepository, userSession) }&#10;&#10;    NavHost(&#10;        navController = navController,&#10;        startDestination = Screen.Splash.route&#10;    ) {&#10;        composable(Screen.Splash.route) {&#10;            SplashScreen(&#10;                onNavigateToLogin = {&#10;                    navController.navigate(Screen.Login.route) {&#10;                        popUpTo(Screen.Splash.route) { inclusive = true }&#10;                    }&#10;                }&#10;            )&#10;        }&#10;        &#10;        composable(Screen.Login.route) {&#10;            LoginScreen(&#10;                viewModel = loginViewModel,&#10;                onNavigateToHome = {&#10;                    navController.navigate(Screen.Home.route) {&#10;                        popUpTo(Screen.Login.route) { inclusive = true }&#10;                    }&#10;                }&#10;            )&#10;        }&#10;        &#10;        composable(Screen.Home.route) {&#10;            MainScreen()&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.ecohand.navigation&#10;&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.navigation.compose.NavHost&#10;import androidx.navigation.compose.composable&#10;import androidx.navigation.compose.rememberNavController&#10;import com.example.ecohand.data.local.database.EcoHandDatabase&#10;import com.example.ecohand.data.repository.UserRepository&#10;import com.example.ecohand.data.session.UserSession&#10;import com.example.ecohand.presentation.login.LoginScreen&#10;import com.example.ecohand.presentation.login.LoginViewModel&#10;import com.example.ecohand.presentation.main.MainScreen&#10;import com.example.ecohand.presentation.splash.SplashScreen&#10;&#10;@Composable&#10;fun AppNavigation() {&#10;    val navController = rememberNavController()&#10;    val context = LocalContext.current&#10;    &#10;    // Inicializar base de datos, repositorio y sesión&#10;    val database = remember { EcoHandDatabase.getDatabase(context) }&#10;    val userRepository = remember { UserRepository(database.userDao()) }&#10;    val userSession = remember { UserSession.getInstance(context) }&#10;    val loginViewModel = remember { LoginViewModel(userRepository, userSession) }&#10;    &#10;    // Determinar ruta inicial basada en si hay sesión activa&#10;    val startDestination = if (userSession.isLoggedIn() &amp;&amp; userSession.isRememberMeEnabled()) {&#10;        Screen.Home.route&#10;    } else {&#10;        Screen.Splash.route&#10;    }&#10;&#10;    NavHost(&#10;        navController = navController,&#10;        startDestination = startDestination&#10;    ) {&#10;        composable(Screen.Splash.route) {&#10;            SplashScreen(&#10;                onNavigateToLogin = {&#10;                    navController.navigate(Screen.Login.route) {&#10;                        popUpTo(Screen.Splash.route) { inclusive = true }&#10;                    }&#10;                }&#10;            )&#10;        }&#10;        &#10;        composable(Screen.Login.route) {&#10;            LoginScreen(&#10;                viewModel = loginViewModel,&#10;                onNavigateToHome = {&#10;                    navController.navigate(Screen.Home.route) {&#10;                        popUpTo(Screen.Login.route) { inclusive = true }&#10;                    }&#10;                }&#10;            )&#10;        }&#10;        &#10;        composable(Screen.Home.route) {&#10;            MainScreen(&#10;                onLogout = {&#10;                    navController.navigate(Screen.Login.route) {&#10;                        popUpTo(0) { inclusive = true }&#10;                    }&#10;                }&#10;            )&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/ecohand/presentation/login/LoginScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/ecohand/presentation/login/LoginScreen.kt" />
              <option name="originalContent" value="package com.example.ecohand.presentation.login&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Spacer&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.material3.Button&#10;import androidx.compose.material3.ButtonDefaults&#10;import androidx.compose.material3.CircularProgressIndicator&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.OutlinedTextField&#10;import androidx.compose.material3.OutlinedTextFieldDefaults&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.TextButton&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.runtime.collectAsState&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.input.PasswordVisualTransformation&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;&#10;@Composable&#10;fun LoginScreen(&#10;    viewModel: LoginViewModel,&#10;    onNavigateToHome: () -&gt; Unit&#10;) {&#10;    val uiState by viewModel.uiState.collectAsState()&#10;    &#10;    LaunchedEffect(uiState.isLoginSuccessful) {&#10;        if (uiState.isLoginSuccessful) {&#10;            onNavigateToHome()&#10;        }&#10;    }&#10;    &#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .background(MaterialTheme.colorScheme.background)&#10;            .padding(24.dp),&#10;        horizontalAlignment = Alignment.CenterHorizontally,&#10;        verticalArrangement = Arrangement.Center&#10;    ) {&#10;        // Título&#10;        Text(&#10;            text = &quot;EcoHand&quot;,&#10;            fontSize = 40.sp,&#10;            fontWeight = FontWeight.Bold,&#10;            color = MaterialTheme.colorScheme.primary&#10;        )&#10;        &#10;        Spacer(modifier = Modifier.height(8.dp))&#10;        &#10;        Text(&#10;            text = if (uiState.isRegistering) &quot;Registro&quot; else &quot;Iniciar Sesión&quot;,&#10;            fontSize = 24.sp,&#10;            fontWeight = FontWeight.Medium,&#10;            color = MaterialTheme.colorScheme.onBackground&#10;        )&#10;        &#10;        Spacer(modifier = Modifier.height(32.dp))&#10;        &#10;        // Campo de nombre de usuario (solo en registro)&#10;        if (uiState.isRegistering) {&#10;            OutlinedTextField(&#10;                value = uiState.username,&#10;                onValueChange = { viewModel.onUsernameChange(it) },&#10;                label = { Text(&quot;Nombre de usuario&quot;) },&#10;                modifier = Modifier.fillMaxWidth(),&#10;                singleLine = true,&#10;                colors = OutlinedTextFieldDefaults.colors(&#10;                    focusedBorderColor = MaterialTheme.colorScheme.primary,&#10;                    focusedLabelColor = MaterialTheme.colorScheme.primary&#10;                )&#10;            )&#10;            &#10;            Spacer(modifier = Modifier.height(16.dp))&#10;        }&#10;        &#10;        // Campo de email&#10;        OutlinedTextField(&#10;            value = uiState.email,&#10;            onValueChange = { viewModel.onEmailChange(it) },&#10;            label = { Text(&quot;Correo electrónico&quot;) },&#10;            modifier = Modifier.fillMaxWidth(),&#10;            singleLine = true,&#10;            keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Email),&#10;            colors = OutlinedTextFieldDefaults.colors(&#10;                focusedBorderColor = MaterialTheme.colorScheme.primary,&#10;                focusedLabelColor = MaterialTheme.colorScheme.primary&#10;            )&#10;        )&#10;        &#10;        Spacer(modifier = Modifier.height(16.dp))&#10;        &#10;        // Campo de contraseña&#10;        OutlinedTextField(&#10;            value = uiState.password,&#10;            onValueChange = { viewModel.onPasswordChange(it) },&#10;            label = { Text(&quot;Contraseña&quot;) },&#10;            modifier = Modifier.fillMaxWidth(),&#10;            singleLine = true,&#10;            visualTransformation = PasswordVisualTransformation(),&#10;            keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Password),&#10;            colors = OutlinedTextFieldDefaults.colors(&#10;                focusedBorderColor = MaterialTheme.colorScheme.primary,&#10;                focusedLabelColor = MaterialTheme.colorScheme.primary&#10;            )&#10;        )&#10;        &#10;        Spacer(modifier = Modifier.height(8.dp))&#10;        &#10;        // Mensaje de error&#10;        if (uiState.errorMessage != null) {&#10;            Text(&#10;                text = uiState.errorMessage!!,&#10;                color = MaterialTheme.colorScheme.error,&#10;                fontSize = 14.sp,&#10;                modifier = Modifier.padding(vertical = 8.dp)&#10;            )&#10;        }&#10;        &#10;        Spacer(modifier = Modifier.height(24.dp))&#10;        &#10;        // Botón de acción&#10;        Button(&#10;            onClick = {&#10;                if (uiState.isRegistering) {&#10;                    viewModel.register()&#10;                } else {&#10;                    viewModel.login()&#10;                }&#10;            },&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .height(50.dp),&#10;            enabled = !uiState.isLoading,&#10;            colors = ButtonDefaults.buttonColors(&#10;                containerColor = MaterialTheme.colorScheme.primary&#10;            )&#10;        ) {&#10;            if (uiState.isLoading) {&#10;                CircularProgressIndicator(&#10;                    color = MaterialTheme.colorScheme.onPrimary,&#10;                    modifier = Modifier.height(24.dp)&#10;                )&#10;            } else {&#10;                Text(&#10;                    text = if (uiState.isRegistering) &quot;Registrarse&quot; else &quot;Iniciar Sesión&quot;,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Medium&#10;                )&#10;            }&#10;        }&#10;        &#10;        Spacer(modifier = Modifier.height(16.dp))&#10;        &#10;        // Botón para cambiar entre login y registro&#10;        TextButton(onClick = { viewModel.toggleRegistering() }) {&#10;            Text(&#10;                text = if (uiState.isRegistering) &quot;¿Ya tienes cuenta? Inicia sesión&quot; else &quot;¿No tienes cuenta? Regístrate&quot;,&#10;                color = MaterialTheme.colorScheme.primary&#10;            )&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.ecohand.presentation.login&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.Spacer&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.height&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.material3.Button&#10;import androidx.compose.material3.ButtonDefaults&#10;import androidx.compose.material3.Checkbox&#10;import androidx.compose.material3.CheckboxDefaults&#10;import androidx.compose.material3.CircularProgressIndicator&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.OutlinedTextField&#10;import androidx.compose.material3.OutlinedTextFieldDefaults&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.TextButton&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.runtime.collectAsState&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.input.PasswordVisualTransformation&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;&#10;@Composable&#10;fun LoginScreen(&#10;    viewModel: LoginViewModel,&#10;    onNavigateToHome: () -&gt; Unit&#10;) {&#10;    val uiState by viewModel.uiState.collectAsState()&#10;    &#10;    LaunchedEffect(uiState.isLoginSuccessful) {&#10;        if (uiState.isLoginSuccessful) {&#10;            onNavigateToHome()&#10;        }&#10;    }&#10;    &#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .background(MaterialTheme.colorScheme.background)&#10;            .padding(24.dp),&#10;        horizontalAlignment = Alignment.CenterHorizontally,&#10;        verticalArrangement = Arrangement.Center&#10;    ) {&#10;        // Título&#10;        Text(&#10;            text = &quot;EcoHand&quot;,&#10;            fontSize = 40.sp,&#10;            fontWeight = FontWeight.Bold,&#10;            color = MaterialTheme.colorScheme.primary&#10;        )&#10;        &#10;        Spacer(modifier = Modifier.height(8.dp))&#10;        &#10;        Text(&#10;            text = if (uiState.isRegistering) &quot;Registro&quot; else &quot;Iniciar Sesión&quot;,&#10;            fontSize = 24.sp,&#10;            fontWeight = FontWeight.Medium,&#10;            color = MaterialTheme.colorScheme.onBackground&#10;        )&#10;        &#10;        Spacer(modifier = Modifier.height(32.dp))&#10;        &#10;        // Campo de nombre de usuario (solo en registro)&#10;        if (uiState.isRegistering) {&#10;            OutlinedTextField(&#10;                value = uiState.username,&#10;                onValueChange = { viewModel.onUsernameChange(it) },&#10;                label = { Text(&quot;Nombre de usuario&quot;) },&#10;                modifier = Modifier.fillMaxWidth(),&#10;                singleLine = true,&#10;                colors = OutlinedTextFieldDefaults.colors(&#10;                    focusedBorderColor = MaterialTheme.colorScheme.primary,&#10;                    focusedLabelColor = MaterialTheme.colorScheme.primary&#10;                )&#10;            )&#10;            &#10;            Spacer(modifier = Modifier.height(16.dp))&#10;        }&#10;        &#10;        // Campo de email&#10;        OutlinedTextField(&#10;            value = uiState.email,&#10;            onValueChange = { viewModel.onEmailChange(it) },&#10;            label = { Text(&quot;Correo electrónico&quot;) },&#10;            modifier = Modifier.fillMaxWidth(),&#10;            singleLine = true,&#10;            keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Email),&#10;            colors = OutlinedTextFieldDefaults.colors(&#10;                focusedBorderColor = MaterialTheme.colorScheme.primary,&#10;                focusedLabelColor = MaterialTheme.colorScheme.primary&#10;            )&#10;        )&#10;        &#10;        Spacer(modifier = Modifier.height(16.dp))&#10;        &#10;        // Campo de contraseña&#10;        OutlinedTextField(&#10;            value = uiState.password,&#10;            onValueChange = { viewModel.onPasswordChange(it) },&#10;            label = { Text(&quot;Contraseña&quot;) },&#10;            modifier = Modifier.fillMaxWidth(),&#10;            singleLine = true,&#10;            visualTransformation = PasswordVisualTransformation(),&#10;            keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Password),&#10;            colors = OutlinedTextFieldDefaults.colors(&#10;                focusedBorderColor = MaterialTheme.colorScheme.primary,&#10;                focusedLabelColor = MaterialTheme.colorScheme.primary&#10;            )&#10;        )&#10;        &#10;        // Checkbox &quot;Recuérdame&quot; (solo en login)&#10;        if (!uiState.isRegistering) {&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                Checkbox(&#10;                    checked = uiState.rememberMe,&#10;                    onCheckedChange = { viewModel.onRememberMeChange(it) },&#10;                    colors = CheckboxDefaults.colors(&#10;                        checkedColor = MaterialTheme.colorScheme.primary&#10;                    )&#10;                )&#10;                Text(&#10;                    text = &quot;Recuérdame&quot;,&#10;                    color = MaterialTheme.colorScheme.onBackground,&#10;                    fontSize = 14.sp&#10;                )&#10;            }&#10;        }&#10;        &#10;        Spacer(modifier = Modifier.height(8.dp))&#10;        &#10;        // Mensaje de error&#10;        if (uiState.errorMessage != null) {&#10;            Text(&#10;                text = uiState.errorMessage!!,&#10;                color = MaterialTheme.colorScheme.error,&#10;                fontSize = 14.sp,&#10;                modifier = Modifier.padding(vertical = 8.dp)&#10;            )&#10;        }&#10;        &#10;        Spacer(modifier = Modifier.height(24.dp))&#10;        &#10;        // Botón de acción&#10;        Button(&#10;            onClick = {&#10;                if (uiState.isRegistering) {&#10;                    viewModel.register()&#10;                } else {&#10;                    viewModel.login()&#10;                }&#10;            },&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .height(50.dp),&#10;            enabled = !uiState.isLoading,&#10;            colors = ButtonDefaults.buttonColors(&#10;                containerColor = MaterialTheme.colorScheme.primary&#10;            )&#10;        ) {&#10;            if (uiState.isLoading) {&#10;                CircularProgressIndicator(&#10;                    color = MaterialTheme.colorScheme.onPrimary,&#10;                    modifier = Modifier.height(24.dp)&#10;                )&#10;            } else {&#10;                Text(&#10;                    text = if (uiState.isRegistering) &quot;Registrarse&quot; else &quot;Iniciar Sesión&quot;,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Medium&#10;                )&#10;            }&#10;        }&#10;        &#10;        Spacer(modifier = Modifier.height(16.dp))&#10;        &#10;        // Botón para cambiar entre login y registro&#10;        TextButton(onClick = { viewModel.toggleRegistering() }) {&#10;            Text(&#10;                text = if (uiState.isRegistering) &quot;¿Ya tienes cuenta? Inicia sesión&quot; else &quot;¿No tienes cuenta? Regístrate&quot;,&#10;                color = MaterialTheme.colorScheme.primary&#10;            )&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/ecohand/presentation/login/LoginViewModel.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/ecohand/presentation/login/LoginViewModel.kt" />
              <option name="originalContent" value="package com.example.ecohand.presentation.login&#10;&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import com.example.ecohand.data.repository.UserRepository&#10;import com.example.ecohand.data.session.UserSession&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.flow.asStateFlow&#10;import kotlinx.coroutines.launch&#10;&#10;data class LoginUiState(&#10;    val email: String = &quot;&quot;,&#10;    val password: String = &quot;&quot;,&#10;    val isLoading: Boolean = false,&#10;    val errorMessage: String? = null,&#10;    val isLoginSuccessful: Boolean = false,&#10;    val isRegistering: Boolean = false,&#10;    val username: String = &quot;&quot;&#10;)&#10;&#10;class LoginViewModel(&#10;    private val userRepository: UserRepository,&#10;    private val userSession: UserSession&#10;) : ViewModel() {&#10;&#10;    private val _uiState = MutableStateFlow(LoginUiState())&#10;    val uiState: StateFlow&lt;LoginUiState&gt; = _uiState.asStateFlow()&#10;    &#10;    fun onEmailChange(email: String) {&#10;        _uiState.value = _uiState.value.copy(email = email, errorMessage = null)&#10;    }&#10;    &#10;    fun onPasswordChange(password: String) {&#10;        _uiState.value = _uiState.value.copy(password = password, errorMessage = null)&#10;    }&#10;    &#10;    fun onUsernameChange(username: String) {&#10;        _uiState.value = _uiState.value.copy(username = username, errorMessage = null)&#10;    }&#10;    &#10;    fun toggleRegistering() {&#10;        _uiState.value = _uiState.value.copy(&#10;            isRegistering = !_uiState.value.isRegistering,&#10;            errorMessage = null&#10;        )&#10;    }&#10;    &#10;    fun login() {&#10;        val currentState = _uiState.value&#10;        &#10;        if (currentState.email.isBlank() || currentState.password.isBlank()) {&#10;            _uiState.value = currentState.copy(errorMessage = &quot;Por favor complete todos los campos&quot;)&#10;            return&#10;        }&#10;        &#10;        viewModelScope.launch {&#10;            _uiState.value = currentState.copy(isLoading = true, errorMessage = null)&#10;            &#10;            val result = userRepository.login(currentState.email, currentState.password)&#10;            &#10;            _uiState.value = if (result.isSuccess) {&#10;                val user = result.getOrNull()&#10;                if (user != null) {&#10;                    userSession.saveUserSession(user.id, user.username, user.email)&#10;                }&#10;                currentState.copy(isLoading = false, isLoginSuccessful = true)&#10;            } else {&#10;                currentState.copy(&#10;                    isLoading = false,&#10;                    errorMessage = result.exceptionOrNull()?.message ?: &quot;Error al iniciar sesión&quot;&#10;                )&#10;            }&#10;        }&#10;    }&#10;    &#10;    fun register() {&#10;        val currentState = _uiState.value&#10;        &#10;        if (currentState.username.isBlank() || currentState.email.isBlank() || currentState.password.isBlank()) {&#10;            _uiState.value = currentState.copy(errorMessage = &quot;Por favor complete todos los campos&quot;)&#10;            return&#10;        }&#10;        &#10;        if (currentState.password.length &lt; 6) {&#10;            _uiState.value = currentState.copy(errorMessage = &quot;La contraseña debe tener al menos 6 caracteres&quot;)&#10;            return&#10;        }&#10;        &#10;        viewModelScope.launch {&#10;            _uiState.value = currentState.copy(isLoading = true, errorMessage = null)&#10;            &#10;            val result = userRepository.registerUser(&#10;                currentState.username,&#10;                currentState.email,&#10;                currentState.password&#10;            )&#10;            &#10;            _uiState.value = if (result.isSuccess) {&#10;                val userId = result.getOrNull()&#10;                if (userId != null) {&#10;                    userSession.saveUserSession(userId.toInt(), currentState.username, currentState.email)&#10;                }&#10;                currentState.copy(isLoading = false, isLoginSuccessful = true)&#10;            } else {&#10;                currentState.copy(&#10;                    isLoading = false,&#10;                    errorMessage = result.exceptionOrNull()?.message ?: &quot;Error al registrar usuario&quot;&#10;                )&#10;            }&#10;        }&#10;    }&#10;    &#10;    fun clearError() {&#10;        _uiState.value = _uiState.value.copy(errorMessage = null)&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.ecohand.presentation.login&#10;&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import com.example.ecohand.data.repository.UserRepository&#10;import com.example.ecohand.data.session.UserSession&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.flow.asStateFlow&#10;import kotlinx.coroutines.launch&#10;&#10;data class LoginUiState(&#10;    val email: String = &quot;&quot;,&#10;    val password: String = &quot;&quot;,&#10;    val isLoading: Boolean = false,&#10;    val errorMessage: String? = null,&#10;    val isLoginSuccessful: Boolean = false,&#10;    val isRegistering: Boolean = false,&#10;    val username: String = &quot;&quot;,&#10;    val rememberMe: Boolean = false&#10;)&#10;&#10;class LoginViewModel(&#10;    private val userRepository: UserRepository,&#10;    private val userSession: UserSession&#10;) : ViewModel() {&#10;&#10;    private val _uiState = MutableStateFlow(LoginUiState())&#10;    val uiState: StateFlow&lt;LoginUiState&gt; = _uiState.asStateFlow()&#10;    &#10;    fun onEmailChange(email: String) {&#10;        _uiState.value = _uiState.value.copy(email = email, errorMessage = null)&#10;    }&#10;    &#10;    fun onPasswordChange(password: String) {&#10;        _uiState.value = _uiState.value.copy(password = password, errorMessage = null)&#10;    }&#10;    &#10;    fun onUsernameChange(username: String) {&#10;        _uiState.value = _uiState.value.copy(username = username, errorMessage = null)&#10;    }&#10;    &#10;    fun onRememberMeChange(rememberMe: Boolean) {&#10;        _uiState.value = _uiState.value.copy(rememberMe = rememberMe)&#10;    }&#10;    &#10;    fun toggleRegistering() {&#10;        _uiState.value = _uiState.value.copy(&#10;            isRegistering = !_uiState.value.isRegistering,&#10;            errorMessage = null&#10;        )&#10;    }&#10;    &#10;    fun login() {&#10;        val currentState = _uiState.value&#10;        &#10;        if (currentState.email.isBlank() || currentState.password.isBlank()) {&#10;            _uiState.value = currentState.copy(errorMessage = &quot;Por favor complete todos los campos&quot;)&#10;            return&#10;        }&#10;        &#10;        viewModelScope.launch {&#10;            _uiState.value = currentState.copy(isLoading = true, errorMessage = null)&#10;            &#10;            val result = userRepository.login(currentState.email, currentState.password)&#10;            &#10;            _uiState.value = if (result.isSuccess) {&#10;                val user = result.getOrNull()&#10;                if (user != null) {&#10;                    userSession.saveUserSession(user.id, user.username, user.email, currentState.rememberMe)&#10;                }&#10;                currentState.copy(isLoading = false, isLoginSuccessful = true)&#10;            } else {&#10;                currentState.copy(&#10;                    isLoading = false,&#10;                    errorMessage = result.exceptionOrNull()?.message ?: &quot;Error al iniciar sesión&quot;&#10;                )&#10;            }&#10;        }&#10;    }&#10;    &#10;    fun register() {&#10;        val currentState = _uiState.value&#10;        &#10;        if (currentState.username.isBlank() || currentState.email.isBlank() || currentState.password.isBlank()) {&#10;            _uiState.value = currentState.copy(errorMessage = &quot;Por favor complete todos los campos&quot;)&#10;            return&#10;        }&#10;        &#10;        if (currentState.password.length &lt; 6) {&#10;            _uiState.value = currentState.copy(errorMessage = &quot;La contraseña debe tener al menos 6 caracteres&quot;)&#10;            return&#10;        }&#10;        &#10;        viewModelScope.launch {&#10;            _uiState.value = currentState.copy(isLoading = true, errorMessage = null)&#10;            &#10;            val result = userRepository.registerUser(&#10;                currentState.username,&#10;                currentState.email,&#10;                currentState.password&#10;            )&#10;            &#10;            _uiState.value = if (result.isSuccess) {&#10;                val userId = result.getOrNull()&#10;                if (userId != null) {&#10;                    userSession.saveUserSession(userId.toInt(), currentState.username, currentState.email, currentState.rememberMe)&#10;                }&#10;                currentState.copy(isLoading = false, isLoginSuccessful = true)&#10;            } else {&#10;                currentState.copy(&#10;                    isLoading = false,&#10;                    errorMessage = result.exceptionOrNull()?.message ?: &quot;Error al registrar usuario&quot;&#10;                )&#10;            }&#10;        }&#10;    }&#10;    &#10;    fun clearError() {&#10;        _uiState.value = _uiState.value.copy(errorMessage = null)&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/ecohand/presentation/main/MainScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/ecohand/presentation/main/MainScreen.kt" />
              <option name="originalContent" value="package com.example.ecohand.presentation.main&#10;&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.NavigationBar&#10;import androidx.compose.material3.NavigationBarItem&#10;import androidx.compose.material3.NavigationBarItemDefaults&#10;import androidx.compose.material3.Scaffold&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.navigation.NavHostController&#10;import androidx.navigation.NavType&#10;import androidx.navigation.compose.NavHost&#10;import androidx.navigation.compose.composable&#10;import androidx.navigation.compose.currentBackStackEntryAsState&#10;import androidx.navigation.compose.rememberNavController&#10;import androidx.navigation.navArgument&#10;import com.example.ecohand.data.local.database.EcoHandDatabase&#10;import com.example.ecohand.data.repository.DiccionarioRepository&#10;import com.example.ecohand.data.repository.JuegoRepository&#10;import com.example.ecohand.data.repository.PerfilRepository&#10;import com.example.ecohand.data.repository.ProgresoRepository&#10;import com.example.ecohand.data.session.UserSession&#10;import com.example.ecohand.navigation.Screen&#10;import com.example.ecohand.navigation.bottomNavItems&#10;import com.example.ecohand.presentation.diccionario.DiccionarioViewModel&#10;import com.example.ecohand.presentation.home.InicioScreen&#10;import com.example.ecohand.presentation.juegos.JuegosScreen&#10;import com.example.ecohand.presentation.juegos.JuegosViewModel&#10;import com.example.ecohand.presentation.lecciones.LeccionesScreen&#10;import com.example.ecohand.presentation.lecciones.LeccionDetalleScreen&#10;import com.example.ecohand.presentation.lecciones.LeccionPracticaScreen&#10;import com.example.ecohand.presentation.perfil.*&#10;import com.example.ecohand.presentation.progreso.ProgresoScreen&#10;import com.example.ecohand.presentation.progreso.ProgresoViewModel&#10;&#10;@Composable&#10;fun MainScreen() {&#10;    val navController = rememberNavController()&#10;    val context = LocalContext.current&#10;&#10;    // Inicializar base de datos y repositorios&#10;    val database = EcoHandDatabase.getDatabase(context)&#10;    val userSession = UserSession.getInstance(context)&#10;    val usuarioId = userSession.getUserId()&#10;&#10;    // Crear ProgresoRepository&#10;    val progresoRepository = ProgresoRepository(&#10;        estadisticasUsuarioDao = database.estadisticasUsuarioDao(),&#10;        progresoLeccionDao = database.progresoLeccionDao(),&#10;        actividadDiariaDao = database.actividadDiariaDao(),&#10;        logroDao = database.logroDao(),&#10;        logroUsuarioDao = database.logroUsuarioDao(),&#10;        leccionDao = database.leccionDao()&#10;    )&#10;&#10;    // Crear ProgresoViewModel con remember para evitar recreaciones&#10;    val progresoViewModel = remember(usuarioId) {&#10;        ProgresoViewModel(progresoRepository, usuarioId)&#10;    }&#10;&#10;    // Crear JuegoRepository&#10;    val juegoRepository = JuegoRepository(&#10;        senaDao = database.senaDao(),&#10;        partidaJuegoDao = database.partidaJuegoDao(),&#10;        estadisticasUsuarioDao = database.estadisticasUsuarioDao()&#10;    )&#10;&#10;    // Crear JuegosViewModel con remember para evitar recreaciones&#10;    val juegosViewModel = remember(usuarioId) {&#10;        JuegosViewModel(juegoRepository, usuarioId)&#10;    }&#10;&#10;    // Crear PerfilRepository&#10;    val perfilRepository = PerfilRepository(&#10;        userDao = database.userDao(),&#10;        estadisticasUsuarioDao = database.estadisticasUsuarioDao(),&#10;        progresoLeccionDao = database.progresoLeccionDao()&#10;    )&#10;&#10;    // Crear PerfilViewModel con remember para evitar recreaciones&#10;    val perfilViewModel = remember(usuarioId) {&#10;        PerfilViewModel(perfilRepository, usuarioId)&#10;    }&#10;&#10;    // Crear DiccionarioRepository&#10;    val diccionarioRepository = DiccionarioRepository(&#10;        senaDao = database.senaDao()&#10;    )&#10;&#10;    // Crear DiccionarioViewModel con remember para evitar recreaciones&#10;    val diccionarioViewModel = remember {&#10;        DiccionarioViewModel(diccionarioRepository)&#10;    }&#10;&#10;    Scaffold(&#10;        bottomBar = {&#10;            val currentRoute = navController.currentBackStackEntryAsState().value?.destination?.route&#10;            // Ocultar bottom bar en pantallas de detalle, práctica y detección&#10;            if (currentRoute != null &amp;&amp;&#10;                !currentRoute.startsWith(&quot;leccion_detalle&quot;) &amp;&amp;&#10;                !currentRoute.startsWith(&quot;leccion_practica&quot;) &amp;&amp;&#10;                currentRoute != Screen.DetectionTest.route) {&#10;                BottomNavigationBar(navController = navController)&#10;            }&#10;        }&#10;    ) { innerPadding -&gt;&#10;        MainNavHost(&#10;            navController = navController,&#10;            progresoViewModel = progresoViewModel,&#10;            juegosViewModel = juegosViewModel,&#10;            perfilViewModel = perfilViewModel,&#10;            diccionarioViewModel = diccionarioViewModel,&#10;            modifier = Modifier.padding(innerPadding)&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;fun BottomNavigationBar(navController: NavHostController) {&#10;    val navBackStackEntry by navController.currentBackStackEntryAsState()&#10;    val currentRoute = navBackStackEntry?.destination?.route&#10;&#10;    NavigationBar(&#10;        containerColor = MaterialTheme.colorScheme.primary,&#10;        contentColor = MaterialTheme.colorScheme.onPrimary&#10;    ) {&#10;        bottomNavItems.forEach { item -&gt;&#10;            val isSelected = currentRoute == item.route&#10;            NavigationBarItem(&#10;                icon = {&#10;                    Icon(&#10;                        imageVector = if (isSelected) item.selectedIcon else item.icon,&#10;                        contentDescription = item.title&#10;                    )&#10;                },&#10;                label = { Text(text = item.title) },&#10;                selected = isSelected,&#10;                onClick = {&#10;                    navController.navigate(item.route) {&#10;                        navController.graph.startDestinationRoute?.let { route -&gt;&#10;                            popUpTo(route) {&#10;                                saveState = true&#10;                            }&#10;                        }&#10;                        launchSingleTop = true&#10;                        restoreState = true&#10;                    }&#10;                },&#10;                colors = NavigationBarItemDefaults.colors(&#10;                    selectedIconColor = MaterialTheme.colorScheme.onPrimary,&#10;                    selectedTextColor = MaterialTheme.colorScheme.onPrimary,&#10;                    unselectedIconColor = MaterialTheme.colorScheme.onPrimary.copy(alpha = 0.6f),&#10;                    unselectedTextColor = MaterialTheme.colorScheme.onPrimary.copy(alpha = 0.6f),&#10;                    indicatorColor = MaterialTheme.colorScheme.secondary&#10;                )&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun MainNavHost(&#10;    navController: NavHostController,&#10;    progresoViewModel: ProgresoViewModel,&#10;    juegosViewModel: JuegosViewModel,&#10;    perfilViewModel: PerfilViewModel,&#10;    diccionarioViewModel: DiccionarioViewModel,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    NavHost(&#10;        navController = navController,&#10;        startDestination = Screen.Inicio.route,&#10;        modifier = modifier&#10;    ) {&#10;        composable(Screen.Inicio.route) {&#10;            InicioScreen(&#10;                onNavigateToLeccion = { leccionId -&gt;&#10;                    navController.navigate(Screen.LeccionDetalle.createRoute(leccionId))&#10;                }&#10;            )&#10;        }&#10;        composable(Screen.Lecciones.route) {&#10;            LeccionesScreen(&#10;                onNavigateToDetalle = { leccionId -&gt;&#10;                    navController.navigate(Screen.LeccionDetalle.createRoute(leccionId))&#10;                }&#10;            )&#10;        }&#10;        composable(&#10;            route = Screen.LeccionDetalle.route,&#10;            arguments = listOf(navArgument(&quot;leccionId&quot;) { type = NavType.IntType })&#10;        ) { backStackEntry -&gt;&#10;            val leccionId = backStackEntry.arguments?.getInt(&quot;leccionId&quot;) ?: return@composable&#10;            LeccionDetalleScreen(&#10;                leccionId = leccionId,&#10;                onNavigateBack = { navController.popBackStack() },&#10;                onNavigateToPractica = { id -&gt;&#10;                    navController.navigate(Screen.LeccionPractica.createRoute(id))&#10;                }&#10;            )&#10;        }&#10;        composable(&#10;            route = Screen.LeccionPractica.route,&#10;            arguments = listOf(navArgument(&quot;leccionId&quot;) { type = NavType.IntType })&#10;        ) { backStackEntry -&gt;&#10;            val leccionId = backStackEntry.arguments?.getInt(&quot;leccionId&quot;) ?: return@composable&#10;            LeccionPracticaScreen(&#10;                leccionId = leccionId,&#10;                onNavigateBack = { navController.popBackStack() },&#10;                onLeccionCompletada = {&#10;                    // Volver a la lista de lecciones&#10;                    navController.popBackStack(Screen.Lecciones.route, inclusive = false)&#10;                }&#10;            )&#10;        }&#10;        composable(Screen.Progreso.route) {&#10;            ProgresoScreen(viewModel = progresoViewModel)&#10;        }&#10;        composable(Screen.Juegos.route) {&#10;            JuegosScreen(viewModel = juegosViewModel)&#10;        }&#10;        composable(Screen.Perfil.route) {&#10;            PerfilScreen(&#10;                viewModel = perfilViewModel,&#10;                onNavigateToConfiguracion = {&#10;                    navController.navigate(Screen.Configuracion.route)&#10;                },&#10;                onNavigateToMisLogros = {&#10;                    navController.navigate(Screen.MisLogros.route)&#10;                },&#10;                onNavigateToDiccionario = {&#10;                    navController.navigate(Screen.DiccionarioLSP.route)&#10;                },&#10;                onNavigateToCompartir = {&#10;                    navController.navigate(Screen.CompartirApp.route)&#10;                },&#10;                onNavigateToAyuda = {&#10;                    navController.navigate(Screen.AyudaSoporte.route)&#10;                },&#10;                onNavigateToDetectionTest = {&#10;                    navController.navigate(Screen.CategorySelection.route)&#10;                }&#10;            )&#10;        }&#10;&#10;        // Pantallas de perfil&#10;        composable(Screen.Configuracion.route) {&#10;            ConfiguracionScreen(&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;        composable(Screen.MisLogros.route) {&#10;            MisLogrosScreen(&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;        composable(Screen.DiccionarioLSP.route) {&#10;            DiccionarioLSPScreen(&#10;                viewModel = diccionarioViewModel,&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;        composable(Screen.CompartirApp.route) {&#10;            CompartirAppScreen(&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;        composable(Screen.AyudaSoporte.route) {&#10;            AyudaSoporteScreen(&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;&#10;        // Pantalla de prueba de detección&#10;        composable(Screen.DetectionTest.route) {&#10;            com.example.ecohand.presentation.components.DetectionTestScreen(&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;&#10;        // Pantallas de validación de señas&#10;        composable(Screen.CategorySelection.route) {&#10;            com.example.ecohand.presentation.senas.CategorySelectionScreen(&#10;                onNavigateBack = { navController.popBackStack() },&#10;                onCategorySelected = { category -&gt;&#10;                    navController.navigate(Screen.VowelSelection.createRoute(category))&#10;                }&#10;            )&#10;        }&#10;&#10;        composable(&#10;            route = Screen.VowelSelection.route,&#10;            arguments = listOf(&#10;                navArgument(&quot;category&quot;) { type = NavType.StringType }&#10;            )&#10;        ) { backStackEntry -&gt;&#10;            val category = backStackEntry.arguments?.getString(&quot;category&quot;) ?: &quot;Alfabeto&quot;&#10;            com.example.ecohand.presentation.senas.VowelSelectionScreen(&#10;                category = category,&#10;                onNavigateBack = { navController.popBackStack() },&#10;                onVowelSelected = { vowel -&gt;&#10;                    navController.navigate(Screen.VowelValidation.createRoute(vowel))&#10;                }&#10;            )&#10;        }&#10;&#10;        composable(&#10;            route = Screen.VowelValidation.route,&#10;            arguments = listOf(&#10;                navArgument(&quot;vowel&quot;) { type = NavType.StringType }&#10;            )&#10;        ) { backStackEntry -&gt;&#10;            val vowel = backStackEntry.arguments?.getString(&quot;vowel&quot;) ?: &quot;A&quot;&#10;            com.example.ecohand.presentation.senas.VowelValidationScreen(&#10;                vowel = vowel,&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;    }&#10;}" />
              <option name="updatedContent" value="package com.example.ecohand.presentation.main&#10;&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.NavigationBar&#10;import androidx.compose.material3.NavigationBarItem&#10;import androidx.compose.material3.NavigationBarItemDefaults&#10;import androidx.compose.material3.Scaffold&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.navigation.NavHostController&#10;import androidx.navigation.NavType&#10;import androidx.navigation.compose.NavHost&#10;import androidx.navigation.compose.composable&#10;import androidx.navigation.compose.currentBackStackEntryAsState&#10;import androidx.navigation.compose.rememberNavController&#10;import androidx.navigation.navArgument&#10;import com.example.ecohand.data.local.database.EcoHandDatabase&#10;import com.example.ecohand.data.repository.DiccionarioRepository&#10;import com.example.ecohand.data.repository.JuegoRepository&#10;import com.example.ecohand.data.repository.PerfilRepository&#10;import com.example.ecohand.data.repository.ProgresoRepository&#10;import com.example.ecohand.data.session.UserSession&#10;import com.example.ecohand.navigation.Screen&#10;import com.example.ecohand.navigation.bottomNavItems&#10;import com.example.ecohand.presentation.diccionario.DiccionarioViewModel&#10;import com.example.ecohand.presentation.home.InicioScreen&#10;import com.example.ecohand.presentation.juegos.JuegosScreen&#10;import com.example.ecohand.presentation.juegos.JuegosViewModel&#10;import com.example.ecohand.presentation.lecciones.LeccionesScreen&#10;import com.example.ecohand.presentation.lecciones.LeccionDetalleScreen&#10;import com.example.ecohand.presentation.lecciones.LeccionPracticaScreen&#10;import com.example.ecohand.presentation.perfil.*&#10;import com.example.ecohand.presentation.progreso.ProgresoScreen&#10;import com.example.ecohand.presentation.progreso.ProgresoViewModel&#10;&#10;@Composable&#10;fun MainScreen(&#10;    onLogout: () -&gt; Unit = {}&#10;) {&#10;    val navController = rememberNavController()&#10;    val context = LocalContext.current&#10;&#10;    // Inicializar base de datos y repositorios&#10;    val database = EcoHandDatabase.getDatabase(context)&#10;    val userSession = UserSession.getInstance(context)&#10;    val usuarioId = userSession.getUserId()&#10;&#10;    // Crear ProgresoRepository&#10;    val progresoRepository = ProgresoRepository(&#10;        estadisticasUsuarioDao = database.estadisticasUsuarioDao(),&#10;        progresoLeccionDao = database.progresoLeccionDao(),&#10;        actividadDiariaDao = database.actividadDiariaDao(),&#10;        logroDao = database.logroDao(),&#10;        logroUsuarioDao = database.logroUsuarioDao(),&#10;        leccionDao = database.leccionDao()&#10;    )&#10;&#10;    // Crear ProgresoViewModel con remember para evitar recreaciones&#10;    val progresoViewModel = remember(usuarioId) {&#10;        ProgresoViewModel(progresoRepository, usuarioId)&#10;    }&#10;&#10;    // Crear JuegoRepository&#10;    val juegoRepository = JuegoRepository(&#10;        senaDao = database.senaDao(),&#10;        partidaJuegoDao = database.partidaJuegoDao(),&#10;        estadisticasUsuarioDao = database.estadisticasUsuarioDao()&#10;    )&#10;&#10;    // Crear JuegosViewModel con remember para evitar recreaciones&#10;    val juegosViewModel = remember(usuarioId) {&#10;        JuegosViewModel(juegoRepository, usuarioId)&#10;    }&#10;&#10;    // Crear PerfilRepository&#10;    val perfilRepository = PerfilRepository(&#10;        userDao = database.userDao(),&#10;        estadisticasUsuarioDao = database.estadisticasUsuarioDao(),&#10;        progresoLeccionDao = database.progresoLeccionDao()&#10;    )&#10;&#10;    // Crear PerfilViewModel con remember para evitar recreaciones&#10;    val perfilViewModel = remember(usuarioId) {&#10;        PerfilViewModel(perfilRepository, usuarioId)&#10;    }&#10;&#10;    // Crear DiccionarioRepository&#10;    val diccionarioRepository = DiccionarioRepository(&#10;        senaDao = database.senaDao()&#10;    )&#10;&#10;    // Crear DiccionarioViewModel con remember para evitar recreaciones&#10;    val diccionarioViewModel = remember {&#10;        DiccionarioViewModel(diccionarioRepository)&#10;    }&#10;&#10;    Scaffold(&#10;        bottomBar = {&#10;            val currentRoute = navController.currentBackStackEntryAsState().value?.destination?.route&#10;            // Ocultar bottom bar en pantallas de detalle, práctica y detección&#10;            if (currentRoute != null &amp;&amp;&#10;                !currentRoute.startsWith(&quot;leccion_detalle&quot;) &amp;&amp;&#10;                !currentRoute.startsWith(&quot;leccion_practica&quot;) &amp;&amp;&#10;                currentRoute != Screen.DetectionTest.route) {&#10;                BottomNavigationBar(navController = navController)&#10;            }&#10;        }&#10;    ) { innerPadding -&gt;&#10;        MainNavHost(&#10;            navController = navController,&#10;            progresoViewModel = progresoViewModel,&#10;            juegosViewModel = juegosViewModel,&#10;            perfilViewModel = perfilViewModel,&#10;            diccionarioViewModel = diccionarioViewModel,&#10;            onLogout = onLogout,&#10;            modifier = Modifier.padding(innerPadding)&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;fun BottomNavigationBar(navController: NavHostController) {&#10;    val navBackStackEntry by navController.currentBackStackEntryAsState()&#10;    val currentRoute = navBackStackEntry?.destination?.route&#10;&#10;    NavigationBar(&#10;        containerColor = MaterialTheme.colorScheme.primary,&#10;        contentColor = MaterialTheme.colorScheme.onPrimary&#10;    ) {&#10;        bottomNavItems.forEach { item -&gt;&#10;            val isSelected = currentRoute == item.route&#10;            NavigationBarItem(&#10;                icon = {&#10;                    Icon(&#10;                        imageVector = if (isSelected) item.selectedIcon else item.icon,&#10;                        contentDescription = item.title&#10;                    )&#10;                },&#10;                label = { Text(text = item.title) },&#10;                selected = isSelected,&#10;                onClick = {&#10;                    navController.navigate(item.route) {&#10;                        navController.graph.startDestinationRoute?.let { route -&gt;&#10;                            popUpTo(route) {&#10;                                saveState = true&#10;                            }&#10;                        }&#10;                        launchSingleTop = true&#10;                        restoreState = true&#10;                    }&#10;                },&#10;                colors = NavigationBarItemDefaults.colors(&#10;                    selectedIconColor = MaterialTheme.colorScheme.onPrimary,&#10;                    selectedTextColor = MaterialTheme.colorScheme.onPrimary,&#10;                    unselectedIconColor = MaterialTheme.colorScheme.onPrimary.copy(alpha = 0.6f),&#10;                    unselectedTextColor = MaterialTheme.colorScheme.onPrimary.copy(alpha = 0.6f),&#10;                    indicatorColor = MaterialTheme.colorScheme.secondary&#10;                )&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun MainNavHost(&#10;    navController: NavHostController,&#10;    progresoViewModel: ProgresoViewModel,&#10;    juegosViewModel: JuegosViewModel,&#10;    perfilViewModel: PerfilViewModel,&#10;    diccionarioViewModel: DiccionarioViewModel,&#10;    onLogout: () -&gt; Unit = {},&#10;    modifier: Modifier = Modifier&#10;) {&#10;    NavHost(&#10;        navController = navController,&#10;        startDestination = Screen.Inicio.route,&#10;        modifier = modifier&#10;    ) {&#10;        composable(Screen.Inicio.route) {&#10;            InicioScreen(&#10;                onNavigateToLeccion = { leccionId -&gt;&#10;                    navController.navigate(Screen.LeccionDetalle.createRoute(leccionId))&#10;                }&#10;            )&#10;        }&#10;        composable(Screen.Lecciones.route) {&#10;            LeccionesScreen(&#10;                onNavigateToDetalle = { leccionId -&gt;&#10;                    navController.navigate(Screen.LeccionDetalle.createRoute(leccionId))&#10;                }&#10;            )&#10;        }&#10;        composable(&#10;            route = Screen.LeccionDetalle.route,&#10;            arguments = listOf(navArgument(&quot;leccionId&quot;) { type = NavType.IntType })&#10;        ) { backStackEntry -&gt;&#10;            val leccionId = backStackEntry.arguments?.getInt(&quot;leccionId&quot;) ?: return@composable&#10;            LeccionDetalleScreen(&#10;                leccionId = leccionId,&#10;                onNavigateBack = { navController.popBackStack() },&#10;                onNavigateToPractica = { id -&gt;&#10;                    navController.navigate(Screen.LeccionPractica.createRoute(id))&#10;                }&#10;            )&#10;        }&#10;        composable(&#10;            route = Screen.LeccionPractica.route,&#10;            arguments = listOf(navArgument(&quot;leccionId&quot;) { type = NavType.IntType })&#10;        ) { backStackEntry -&gt;&#10;            val leccionId = backStackEntry.arguments?.getInt(&quot;leccionId&quot;) ?: return@composable&#10;            LeccionPracticaScreen(&#10;                leccionId = leccionId,&#10;                onNavigateBack = { navController.popBackStack() },&#10;                onLeccionCompletada = {&#10;                    // Volver a la lista de lecciones&#10;                    navController.popBackStack(Screen.Lecciones.route, inclusive = false)&#10;                }&#10;            )&#10;        }&#10;        composable(Screen.Progreso.route) {&#10;            ProgresoScreen(viewModel = progresoViewModel)&#10;        }&#10;        composable(Screen.Juegos.route) {&#10;            JuegosScreen(viewModel = juegosViewModel)&#10;        }&#10;        composable(Screen.Perfil.route) {&#10;            PerfilScreen(&#10;                viewModel = perfilViewModel,&#10;                onNavigateToConfiguracion = {&#10;                    navController.navigate(Screen.Configuracion.route)&#10;                },&#10;                onNavigateToMisLogros = {&#10;                    navController.navigate(Screen.MisLogros.route)&#10;                },&#10;                onNavigateToDiccionario = {&#10;                    navController.navigate(Screen.DiccionarioLSP.route)&#10;                },&#10;                onNavigateToCompartir = {&#10;                    navController.navigate(Screen.CompartirApp.route)&#10;                },&#10;                onNavigateToAyuda = {&#10;                    navController.navigate(Screen.AyudaSoporte.route)&#10;                },&#10;                onNavigateToDetectionTest = {&#10;                    navController.navigate(Screen.CategorySelection.route)&#10;                }&#10;            )&#10;        }&#10;&#10;        // Pantallas de perfil&#10;        composable(Screen.Configuracion.route) {&#10;            ConfiguracionScreen(&#10;                onNavigateBack = { navController.popBackStack() },&#10;                onLogout = onLogout&#10;            )&#10;        }&#10;        composable(Screen.MisLogros.route) {&#10;            MisLogrosScreen(&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;        composable(Screen.DiccionarioLSP.route) {&#10;            DiccionarioLSPScreen(&#10;                viewModel = diccionarioViewModel,&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;        composable(Screen.CompartirApp.route) {&#10;            CompartirAppScreen(&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;        composable(Screen.AyudaSoporte.route) {&#10;            AyudaSoporteScreen(&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;&#10;        // Pantalla de prueba de detección&#10;        composable(Screen.DetectionTest.route) {&#10;            com.example.ecohand.presentation.components.DetectionTestScreen(&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;&#10;        // Pantallas de validación de señas&#10;        composable(Screen.CategorySelection.route) {&#10;            com.example.ecohand.presentation.senas.CategorySelectionScreen(&#10;                onNavigateBack = { navController.popBackStack() },&#10;                onCategorySelected = { category -&gt;&#10;                    navController.navigate(Screen.VowelSelection.createRoute(category))&#10;                }&#10;            )&#10;        }&#10;&#10;        composable(&#10;            route = Screen.VowelSelection.route,&#10;            arguments = listOf(&#10;                navArgument(&quot;category&quot;) { type = NavType.StringType }&#10;            )&#10;        ) { backStackEntry -&gt;&#10;            val category = backStackEntry.arguments?.getString(&quot;category&quot;) ?: &quot;Alfabeto&quot;&#10;            com.example.ecohand.presentation.senas.VowelSelectionScreen(&#10;                category = category,&#10;                onNavigateBack = { navController.popBackStack() },&#10;                onVowelSelected = { vowel -&gt;&#10;                    navController.navigate(Screen.VowelValidation.createRoute(vowel))&#10;                }&#10;            )&#10;        }&#10;&#10;        composable(&#10;            route = Screen.VowelValidation.route,&#10;            arguments = listOf(&#10;                navArgument(&quot;vowel&quot;) { type = NavType.StringType }&#10;            )&#10;        ) { backStackEntry -&gt;&#10;            val vowel = backStackEntry.arguments?.getString(&quot;vowel&quot;) ?: &quot;A&quot;&#10;            com.example.ecohand.presentation.senas.VowelValidationScreen(&#10;                vowel = vowel,&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/ecohand/presentation/perfil/ConfiguracionScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/ecohand/presentation/perfil/ConfiguracionScreen.kt" />
              <option name="originalContent" value="package com.example.ecohand.presentation.perfil&#10;&#10;import android.app.Activity&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.vector.ImageVector&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.input.PasswordVisualTransformation&#10;import androidx.compose.ui.text.input.VisualTransformation&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import com.example.ecohand.data.local.database.EcoHandDatabase&#10;import com.example.ecohand.data.session.UserSession&#10;import kotlinx.coroutines.Dispatchers&#10;import kotlinx.coroutines.launch&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun ConfiguracionScreen(&#10;    onNavigateBack: () -&gt; Unit&#10;) {&#10;    val context = LocalContext.current&#10;    val userSession = remember { UserSession.getInstance(context) }&#10;    val database = remember { EcoHandDatabase.getDatabase(context) }&#10;    val scope = rememberCoroutineScope()&#10;&#10;    var notificacionesActivas by remember { mutableStateOf(true) }&#10;    var sonidoActivo by remember { mutableStateOf(true) }&#10;    var vibracionActiva by remember { mutableStateOf(true) }&#10;    var showLogoutDialog by remember { mutableStateOf(false) }&#10;    var showVersionDialog by remember { mutableStateOf(false) }&#10;    var showTerminosDialog by remember { mutableStateOf(false) }&#10;    var showPoliticaDialog by remember { mutableStateOf(false) }&#10;    var showCambiarPasswordDialog by remember { mutableStateOf(false) }&#10;&#10;    // Estados para cambiar contraseña&#10;    var passwordActual by remember { mutableStateOf(&quot;&quot;) }&#10;    var passwordNueva by remember { mutableStateOf(&quot;&quot;) }&#10;    var passwordConfirmar by remember { mutableStateOf(&quot;&quot;) }&#10;    var passwordError by remember { mutableStateOf&lt;String?&gt;(null) }&#10;    var passwordSuccess by remember { mutableStateOf(false) }&#10;    var isChangingPassword by remember { mutableStateOf(false) }&#10;&#10;    // Para mostrar/ocultar contraseñas&#10;    var showPasswordActual by remember { mutableStateOf(false) }&#10;    var showPasswordNueva by remember { mutableStateOf(false) }&#10;    var showPasswordConfirmar by remember { mutableStateOf(false) }&#10;&#10;    Scaffold(&#10;        topBar = {&#10;            TopAppBar(&#10;                title = {&#10;                    Text(&#10;                        text = &quot;Configuración&quot;,&#10;                        fontWeight = FontWeight.Bold&#10;                    )&#10;                },&#10;                navigationIcon = {&#10;                    IconButton(onClick = onNavigateBack) {&#10;                        Icon(&#10;                            imageVector = Icons.Default.ArrowBack,&#10;                            contentDescription = &quot;Volver&quot;&#10;                        )&#10;                    }&#10;                },&#10;                colors = TopAppBarDefaults.topAppBarColors(&#10;                    containerColor = MaterialTheme.colorScheme.primary,&#10;                    titleContentColor = MaterialTheme.colorScheme.onPrimary,&#10;                    navigationIconContentColor = MaterialTheme.colorScheme.onPrimary&#10;                )&#10;            )&#10;        }&#10;    ) { paddingValues -&gt;&#10;        LazyColumn(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(paddingValues)&#10;                .background(MaterialTheme.colorScheme.background)&#10;                .padding(16.dp),&#10;            verticalArrangement = Arrangement.spacedBy(12.dp)&#10;        ) {&#10;            // Sección: General&#10;            item {&#10;                Text(&#10;                    text = &quot;General&quot;,&#10;                    fontSize = 18.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = MaterialTheme.colorScheme.primary,&#10;                    modifier = Modifier.padding(vertical = 8.dp)&#10;                )&#10;            }&#10;&#10;            item {&#10;                ConfiguracionItemSwitch(&#10;                    icon = Icons.Default.Notifications,&#10;                    titulo = &quot;Notificaciones&quot;,&#10;                    subtitulo = &quot;Recibe recordatorios de práctica&quot;,&#10;                    checked = notificacionesActivas,&#10;                    onCheckedChange = { notificacionesActivas = it }&#10;                )&#10;            }&#10;&#10;            item {&#10;                ConfiguracionItemSwitch(&#10;                    icon = Icons.Default.AccountCircle,&#10;                    titulo = &quot;Sonido&quot;,&#10;                    subtitulo = &quot;Efectos de sonido en la app&quot;,&#10;                    checked = sonidoActivo,&#10;                    onCheckedChange = { sonidoActivo = it }&#10;                )&#10;            }&#10;&#10;            item {&#10;                ConfiguracionItemSwitch(&#10;                    icon = Icons.Default.Phone,&#10;                    titulo = &quot;Vibración&quot;,&#10;                    subtitulo = &quot;Vibración al interactuar&quot;,&#10;                    checked = vibracionActiva,&#10;                    onCheckedChange = { vibracionActiva = it }&#10;                )&#10;            }&#10;&#10;&#10;            // Sección: Cuenta&#10;            item {&#10;                Text(&#10;                    text = &quot;Cuenta&quot;,&#10;                    fontSize = 18.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = MaterialTheme.colorScheme.primary,&#10;                    modifier = Modifier.padding(top = 16.dp, bottom = 8.dp)&#10;                )&#10;            }&#10;&#10;            item {&#10;                ConfiguracionItemClick(&#10;                    icon = Icons.Default.Lock,&#10;                    titulo = &quot;Cambiar Contraseña&quot;,&#10;                    subtitulo = &quot;Actualiza tu contraseña&quot;,&#10;                    onClick = {&#10;                        showCambiarPasswordDialog = true&#10;                        // Resetear campos&#10;                        passwordActual = &quot;&quot;&#10;                        passwordNueva = &quot;&quot;&#10;                        passwordConfirmar = &quot;&quot;&#10;                        passwordError = null&#10;                        passwordSuccess = false&#10;                    }&#10;                )&#10;            }&#10;&#10;            item {&#10;                ConfiguracionItemClick(&#10;                    icon = Icons.Default.Delete,&#10;                    titulo = &quot;Eliminar Cuenta&quot;,&#10;                    subtitulo = &quot;Eliminar permanentemente tu cuenta&quot;,&#10;                    onClick = { /* TODO: Implementar eliminación de cuenta */ },&#10;                    tintColor = MaterialTheme.colorScheme.error&#10;                )&#10;            }&#10;&#10;            // Sección: Sobre&#10;            item {&#10;                Text(&#10;                    text = &quot;Sobre la App&quot;,&#10;                    fontSize = 18.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = MaterialTheme.colorScheme.primary,&#10;                    modifier = Modifier.padding(top = 16.dp, bottom = 8.dp)&#10;                )&#10;            }&#10;&#10;            item {&#10;                ConfiguracionItemClick(&#10;                    icon = Icons.Default.Info,&#10;                    titulo = &quot;Versión&quot;,&#10;                    subtitulo = &quot;1.0.0&quot;,&#10;                    onClick = { showVersionDialog = true }&#10;                )&#10;            }&#10;&#10;            item {&#10;                ConfiguracionItemClick(&#10;                    icon = Icons.Default.Star,&#10;                    titulo = &quot;Términos y Condiciones&quot;,&#10;                    subtitulo = &quot;Lee nuestros términos de uso&quot;,&#10;                    onClick = { showTerminosDialog = true }&#10;                )&#10;            }&#10;&#10;            item {&#10;                ConfiguracionItemClick(&#10;                    icon = Icons.Default.Star,&#10;                    titulo = &quot;Política de Privacidad&quot;,&#10;                    subtitulo = &quot;Lee nuestra política de privacidad&quot;,&#10;                    onClick = { showPoliticaDialog = true }&#10;                )&#10;            }&#10;&#10;            // Botón Cerrar Sesión&#10;            item {&#10;                Spacer(modifier = Modifier.height(16.dp))&#10;&#10;                Button(&#10;                    onClick = { showLogoutDialog = true },&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .height(56.dp),&#10;                    colors = ButtonDefaults.buttonColors(&#10;                        containerColor = MaterialTheme.colorScheme.error&#10;                    ),&#10;                    shape = RoundedCornerShape(12.dp)&#10;                ) {&#10;                    Icon(&#10;                        imageVector = Icons.Default.ExitToApp,&#10;                        contentDescription = &quot;Cerrar Sesión&quot;,&#10;                        modifier = Modifier.size(20.dp)&#10;                    )&#10;                    Spacer(modifier = Modifier.width(8.dp))&#10;                    Text(&#10;                        text = &quot;Cerrar Sesión&quot;,&#10;                        fontSize = 16.sp,&#10;                        fontWeight = FontWeight.Bold&#10;                    )&#10;                }&#10;            }&#10;&#10;            item {&#10;                Spacer(modifier = Modifier.height(16.dp))&#10;            }&#10;        }&#10;    }&#10;&#10;    // Dialog de confirmación para cerrar sesión&#10;    if (showLogoutDialog) {&#10;        AlertDialog(&#10;            onDismissRequest = { showLogoutDialog = false },&#10;            title = {&#10;                Text(&#10;                    text = &quot;Cerrar Sesión&quot;,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;            },&#10;            text = {&#10;                Text(&quot;¿Estás seguro que deseas cerrar sesión?&quot;)&#10;            },&#10;            confirmButton = {&#10;                TextButton(&#10;                    onClick = {&#10;                        userSession.clearSession()&#10;                        (context as? Activity)?.finishAffinity()&#10;                    }&#10;                ) {&#10;                    Text(&quot;Cerrar Sesión&quot;, color = MaterialTheme.colorScheme.error)&#10;                }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = { showLogoutDialog = false }) {&#10;                    Text(&quot;Cancelar&quot;)&#10;                }&#10;            }&#10;        )&#10;    }&#10;&#10;    // Dialog de cambiar contraseña&#10;    if (showCambiarPasswordDialog) {&#10;        AlertDialog(&#10;            onDismissRequest = {&#10;                if (!isChangingPassword) {&#10;                    showCambiarPasswordDialog = false&#10;                    passwordActual = &quot;&quot;&#10;                    passwordNueva = &quot;&quot;&#10;                    passwordConfirmar = &quot;&quot;&#10;                    passwordError = null&#10;                    passwordSuccess = false&#10;                }&#10;            },&#10;            title = {&#10;                Text(&#10;                    text = &quot;Cambiar Contraseña&quot;,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;            },&#10;            text = {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .heightIn(max = 400.dp),&#10;                    verticalArrangement = Arrangement.spacedBy(12.dp)&#10;                ) {&#10;                    if (passwordSuccess) {&#10;                        // Mensaje de éxito&#10;                        Column(&#10;                            modifier = Modifier.fillMaxWidth(),&#10;                            horizontalAlignment = Alignment.CenterHorizontally&#10;                        ) {&#10;                            Text(&#10;                                text = &quot;✅&quot;,&#10;                                fontSize = 48.sp&#10;                            )&#10;                            Spacer(modifier = Modifier.height(8.dp))&#10;                            Text(&#10;                                text = &quot;Contraseña actualizada exitosamente&quot;,&#10;                                fontSize = 16.sp,&#10;                                fontWeight = FontWeight.Medium,&#10;                                textAlign = androidx.compose.ui.text.style.TextAlign.Center,&#10;                                color = MaterialTheme.colorScheme.primary&#10;                            )&#10;                        }&#10;                    } else {&#10;                        // Campos de contraseña&#10;                        Text(&#10;                            text = &quot;Ingresa tu contraseña actual y la nueva contraseña&quot;,&#10;                            fontSize = 14.sp,&#10;                            color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                        )&#10;&#10;                        // Contraseña actual&#10;                        OutlinedTextField(&#10;                            value = passwordActual,&#10;                            onValueChange = {&#10;                                passwordActual = it&#10;                                passwordError = null&#10;                            },&#10;                            label = { Text(&quot;Contraseña Actual&quot;) },&#10;                            placeholder = { Text(&quot;Ingresa tu contraseña actual&quot;) },&#10;                            visualTransformation = if (showPasswordActual)&#10;                                VisualTransformation.None&#10;                            else&#10;                                PasswordVisualTransformation(),&#10;                            keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Password),&#10;                            trailingIcon = {&#10;                                IconButton(onClick = { showPasswordActual = !showPasswordActual }) {&#10;                                    Icon(&#10;                                        imageVector = if (showPasswordActual)&#10;                                            Icons.Default.Person&#10;                                        else&#10;                                            Icons.Default.Lock,&#10;                                        contentDescription = if (showPasswordActual)&#10;                                            &quot;Ocultar contraseña&quot;&#10;                                        else&#10;                                            &quot;Mostrar contraseña&quot;&#10;                                    )&#10;                                }&#10;                            },&#10;                            modifier = Modifier.fillMaxWidth(),&#10;                            enabled = !isChangingPassword,&#10;                            singleLine = true&#10;                        )&#10;&#10;                        // Nueva contraseña&#10;                        OutlinedTextField(&#10;                            value = passwordNueva,&#10;                            onValueChange = {&#10;                                passwordNueva = it&#10;                                passwordError = null&#10;                            },&#10;                            label = { Text(&quot;Nueva Contraseña&quot;) },&#10;                            placeholder = { Text(&quot;Ingresa la nueva contraseña&quot;) },&#10;                            visualTransformation = if (showPasswordNueva)&#10;                                VisualTransformation.None&#10;                            else&#10;                                PasswordVisualTransformation(),&#10;                            keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Password),&#10;                            trailingIcon = {&#10;                                IconButton(onClick = { showPasswordNueva = !showPasswordNueva }) {&#10;                                    Icon(&#10;                                        imageVector = if (showPasswordNueva)&#10;                                            Icons.Default.Person&#10;                                        else&#10;                                            Icons.Default.Lock,&#10;                                        contentDescription = if (showPasswordNueva)&#10;                                            &quot;Ocultar contraseña&quot;&#10;                                        else&#10;                                            &quot;Mostrar contraseña&quot;&#10;                                    )&#10;                                }&#10;                            },&#10;                            modifier = Modifier.fillMaxWidth(),&#10;                            enabled = !isChangingPassword,&#10;                            singleLine = true&#10;                        )&#10;&#10;                        // Confirmar nueva contraseña&#10;                        OutlinedTextField(&#10;                            value = passwordConfirmar,&#10;                            onValueChange = {&#10;                                passwordConfirmar = it&#10;                                passwordError = null&#10;                            },&#10;                            label = { Text(&quot;Confirmar Nueva Contraseña&quot;) },&#10;                            placeholder = { Text(&quot;Confirma la nueva contraseña&quot;) },&#10;                            visualTransformation = if (showPasswordConfirmar)&#10;                                VisualTransformation.None&#10;                            else&#10;                                PasswordVisualTransformation(),&#10;                            keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Password),&#10;                            trailingIcon = {&#10;                                IconButton(onClick = { showPasswordConfirmar = !showPasswordConfirmar }) {&#10;                                    Icon(&#10;                                        imageVector = if (showPasswordConfirmar)&#10;                                            Icons.Default.Person&#10;                                        else&#10;                                            Icons.Default.Lock,&#10;                                        contentDescription = if (showPasswordConfirmar)&#10;                                            &quot;Ocultar contraseña&quot;&#10;                                        else&#10;                                            &quot;Mostrar contraseña&quot;&#10;                                    )&#10;                                }&#10;                            },&#10;                            modifier = Modifier.fillMaxWidth(),&#10;                            enabled = !isChangingPassword,&#10;                            singleLine = true&#10;                        )&#10;&#10;                        // Mensaje de error&#10;                        passwordError?.let { error -&gt;&#10;                            Text(&#10;                                text = error,&#10;                                color = MaterialTheme.colorScheme.error,&#10;                                fontSize = 13.sp,&#10;                                modifier = Modifier.fillMaxWidth()&#10;                            )&#10;                        }&#10;&#10;                        // Indicador de progreso&#10;                        if (isChangingPassword) {&#10;                            LinearProgressIndicator(&#10;                                modifier = Modifier.fillMaxWidth()&#10;                            )&#10;                        }&#10;                    }&#10;                }&#10;            },&#10;            confirmButton = {&#10;                if (passwordSuccess) {&#10;                    TextButton(&#10;                        onClick = {&#10;                            showCambiarPasswordDialog = false&#10;                            passwordActual = &quot;&quot;&#10;                            passwordNueva = &quot;&quot;&#10;                            passwordConfirmar = &quot;&quot;&#10;                            passwordError = null&#10;                            passwordSuccess = false&#10;                        }&#10;                    ) {&#10;                        Text(&quot;Cerrar&quot;)&#10;                    }&#10;                } else {&#10;                    TextButton(&#10;                        onClick = {&#10;                            // Validaciones&#10;                            when {&#10;                                passwordActual.isEmpty() -&gt; {&#10;                                    passwordError = &quot;Ingresa tu contraseña actual&quot;&#10;                                }&#10;                                passwordNueva.isEmpty() -&gt; {&#10;                                    passwordError = &quot;Ingresa la nueva contraseña&quot;&#10;                                }&#10;                                passwordNueva.length &lt; 6 -&gt; {&#10;                                    passwordError = &quot;La contraseña debe tener al menos 6 caracteres&quot;&#10;                                }&#10;                                passwordConfirmar.isEmpty() -&gt; {&#10;                                    passwordError = &quot;Confirma la nueva contraseña&quot;&#10;                                }&#10;                                passwordNueva != passwordConfirmar -&gt; {&#10;                                    passwordError = &quot;Las contraseñas no coinciden&quot;&#10;                                }&#10;                                passwordActual == passwordNueva -&gt; {&#10;                                    passwordError = &quot;La nueva contraseña debe ser diferente a la actual&quot;&#10;                                }&#10;                                else -&gt; {&#10;                                    // Validar contraseña actual y actualizar&#10;                                    isChangingPassword = true&#10;                                    passwordError = null&#10;&#10;                                    scope.launch(Dispatchers.IO) {&#10;                                        try {&#10;                                            val userId = userSession.getUserId()&#10;                                            val user = database.userDao().getUserById(userId)&#10;&#10;                                            if (user != null) {&#10;                                                // Verificar contraseña actual&#10;                                                if (user.password == passwordActual) {&#10;                                                    // Actualizar contraseña&#10;                                                    val updatedUser = user.copy(password = passwordNueva)&#10;                                                    database.userDao().updateUser(updatedUser)&#10;&#10;                                                    // Mostrar mensaje de éxito&#10;                                                    launch(Dispatchers.Main) {&#10;                                                        passwordSuccess = true&#10;                                                        isChangingPassword = false&#10;                                                    }&#10;                                                } else {&#10;                                                    // Contraseña actual incorrecta&#10;                                                    launch(Dispatchers.Main) {&#10;                                                        passwordError = &quot;La contraseña actual es incorrecta&quot;&#10;                                                        isChangingPassword = false&#10;                                                    }&#10;                                                }&#10;                                            } else {&#10;                                                launch(Dispatchers.Main) {&#10;                                                    passwordError = &quot;Error: Usuario no encontrado&quot;&#10;                                                    isChangingPassword = false&#10;                                                }&#10;                                            }&#10;                                        } catch (e: Exception) {&#10;                                            launch(Dispatchers.Main) {&#10;                                                passwordError = &quot;Error al cambiar contraseña: ${e.message}&quot;&#10;                                                isChangingPassword = false&#10;                                            }&#10;                                        }&#10;                                    }&#10;                                }&#10;                            }&#10;                        },&#10;                        enabled = !isChangingPassword&#10;                    ) {&#10;                        Text(&quot;Cambiar&quot;)&#10;                    }&#10;                }&#10;            },&#10;            dismissButton = {&#10;                if (!passwordSuccess) {&#10;                    TextButton(&#10;                        onClick = {&#10;                            showCambiarPasswordDialog = false&#10;                            passwordActual = &quot;&quot;&#10;                            passwordNueva = &quot;&quot;&#10;                            passwordConfirmar = &quot;&quot;&#10;                            passwordError = null&#10;                            passwordSuccess = false&#10;                        },&#10;                        enabled = !isChangingPassword&#10;                    ) {&#10;                        Text(&quot;Cancelar&quot;)&#10;                    }&#10;                }&#10;            }&#10;        )&#10;    }&#10;&#10;    // Dialog de información de versión&#10;    if (showVersionDialog) {&#10;        AlertDialog(&#10;            onDismissRequest = { showVersionDialog = false },&#10;            title = {&#10;                Column(&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    modifier = Modifier.fillMaxWidth()&#10;                ) {&#10;                    Text(&#10;                        text = &quot;&quot;,&#10;                        fontSize = 48.sp&#10;                    )&#10;                    Spacer(modifier = Modifier.height(8.dp))&#10;                    Text(&#10;                        text = &quot;EcoHand&quot;,&#10;                        fontWeight = FontWeight.Bold,&#10;                        fontSize = 24.sp&#10;                    )&#10;                }&#10;            },&#10;            text = {&#10;                Column {&#10;                    Text(&#10;                        text = &quot;Versión: 1.0.0&quot;,&#10;                        fontSize = 16.sp,&#10;                        fontWeight = FontWeight.Medium,&#10;                        modifier = Modifier.padding(vertical = 4.dp)&#10;                    )&#10;                    Text(&#10;                        text = &quot;Fecha de lanzamiento: Noviembre 2024&quot;,&#10;                        fontSize = 14.sp,&#10;                        color = MaterialTheme.colorScheme.onSurfaceVariant,&#10;                        modifier = Modifier.padding(vertical = 4.dp)&#10;                    )&#10;                    Spacer(modifier = Modifier.height(8.dp))&#10;                    Text(&#10;                        text = &quot;EcoHand es una aplicación educativa para aprender Lengua de Señas Peruana (LSP) de forma interactiva y divertida.&quot;,&#10;                        fontSize = 14.sp,&#10;                        textAlign = androidx.compose.ui.text.style.TextAlign.Justify&#10;                    )&#10;                    Spacer(modifier = Modifier.height(8.dp))&#10;                    Text(&#10;                        text = &quot;© 2024 EcoHand Team&quot;,&#10;                        fontSize = 12.sp,&#10;                        color = MaterialTheme.colorScheme.onSurfaceVariant,&#10;                        fontStyle = androidx.compose.ui.text.font.FontStyle.Italic&#10;                    )&#10;                }&#10;            },&#10;            confirmButton = {&#10;                TextButton(onClick = { showVersionDialog = false }) {&#10;                    Text(&quot;Cerrar&quot;)&#10;                }&#10;            }&#10;        )&#10;    }&#10;&#10;    // Dialog de Términos y Condiciones&#10;    if (showTerminosDialog) {&#10;        AlertDialog(&#10;            onDismissRequest = { showTerminosDialog = false },&#10;            title = {&#10;                Text(&#10;                    text = &quot;Términos y Condiciones&quot;,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;            },&#10;            text = {&#10;                LazyColumn(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .heightIn(max = 400.dp)&#10;                ) {&#10;                    item {&#10;                        Text(&#10;                            text = &quot;&quot;&quot;&#10;                                TÉRMINOS Y CONDICIONES DE USO DE ECOHAND&#10;                                &#10;                                Última actualización: Noviembre 2024&#10;                                &#10;                                1. ACEPTACIÓN DE LOS TÉRMINOS&#10;                                Al descargar, instalar o usar la aplicación EcoHand, usted acepta estar sujeto a estos Términos y Condiciones. Si no está de acuerdo con estos términos, por favor no use la aplicación.&#10;                                &#10;                                2. USO DE LA APLICACIÓN&#10;                                EcoHand es una aplicación educativa diseñada para el aprendizaje de la Lengua de Señas Peruana (LSP). El usuario se compromete a:&#10;                                • Usar la aplicación solo con fines educativos&#10;                                • No realizar ingeniería inversa del software&#10;                                • No compartir su cuenta con terceros&#10;                                • Proporcionar información veraz al registrarse&#10;                                &#10;                                3. PROPIEDAD INTELECTUAL&#10;                                Todo el contenido de EcoHand, incluyendo pero no limitado a textos, gráficos, logos, videos, y software, es propiedad de EcoHand Team y está protegido por las leyes de propiedad intelectual.&#10;                                &#10;                                4. PRIVACIDAD&#10;                                EcoHand respeta su privacidad. Los datos recopilados se utilizan únicamente para mejorar la experiencia del usuario y el funcionamiento de la aplicación. No compartimos información personal con terceros.&#10;                                &#10;                                5. MODIFICACIONES&#10;                                Nos reservamos el derecho de modificar estos términos en cualquier momento. Los cambios entrarán en vigor inmediatamente después de su publicación en la aplicación.&#10;                                &#10;                                6. LIMITACIÓN DE RESPONSABILIDAD&#10;                                EcoHand se proporciona &quot;tal cual&quot; sin garantías de ningún tipo. No nos hacemos responsables de daños directos o indirectos derivados del uso de la aplicación.&#10;                                &#10;                                7. CONTACTO&#10;                                Para cualquier pregunta sobre estos términos, contáctenos a través de la sección de Ayuda y Soporte en la aplicación.&#10;                            &quot;&quot;&quot;.trimIndent(),&#10;                            fontSize = 13.sp,&#10;                            textAlign = androidx.compose.ui.text.style.TextAlign.Justify&#10;                        )&#10;                    }&#10;                }&#10;            },&#10;            confirmButton = {&#10;                TextButton(onClick = { showTerminosDialog = false }) {&#10;                    Text(&quot;Aceptar&quot;)&#10;                }&#10;            }&#10;        )&#10;    }&#10;&#10;    // Dialog de Política de Privacidad&#10;    if (showPoliticaDialog) {&#10;        AlertDialog(&#10;            onDismissRequest = { showPoliticaDialog = false },&#10;            title = {&#10;                Text(&#10;                    text = &quot;Política de Privacidad&quot;,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;            },&#10;            text = {&#10;                LazyColumn(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .heightIn(max = 400.dp)&#10;                ) {&#10;                    item {&#10;                        Text(&#10;                            text = &quot;&quot;&quot;&#10;                                POLÍTICA DE PRIVACIDAD DE ECOHAND&#10;                                &#10;                                Última actualización: Noviembre 2024&#10;                                &#10;                                1. INFORMACIÓN QUE RECOPILAMOS&#10;                                EcoHand recopila la siguiente información:&#10;                                • Información de cuenta: nombre de usuario, correo electrónico&#10;                                • Datos de progreso: lecciones completadas, puntuaciones, logros&#10;                                • Datos de uso: tiempo de uso, frecuencia de acceso&#10;                                &#10;                                2. CÓMO USAMOS SU INFORMACIÓN&#10;                                Utilizamos la información recopilada para:&#10;                                • Proporcionar y mejorar nuestros servicios&#10;                                • Personalizar su experiencia de aprendizaje&#10;                                • Hacer seguimiento de su progreso&#10;                                • Enviar notificaciones relevantes (si está habilitado)&#10;                                • Analizar el uso de la aplicación para mejoras&#10;                                &#10;                                3. ALMACENAMIENTO DE DATOS&#10;                                Sus datos se almacenan de forma segura en el dispositivo local. La información se mantiene encriptada y protegida mediante las medidas de seguridad estándar de la industria.&#10;                                &#10;                                4. COMPARTIR INFORMACIÓN&#10;                                NO compartimos, vendemos ni alquilamos su información personal a terceros. Sus datos son privados y permanecen en su dispositivo.&#10;                                &#10;                                5. SEGURIDAD&#10;                                Implementamos medidas de seguridad técnicas y organizativas para proteger su información contra acceso no autorizado, alteración, divulgación o destrucción.&#10;                                &#10;                                6. DERECHOS DEL USUARIO&#10;                                Usted tiene derecho a:&#10;                                • Acceder a su información personal&#10;                                • Corregir datos inexactos&#10;                                • Eliminar su cuenta y datos asociados&#10;                                • Exportar sus datos de progreso&#10;                                &#10;                                7. DATOS DE MENORES&#10;                                EcoHand puede ser usado por menores de edad bajo supervisión de un adulto. Los padres o tutores son responsables del uso que los menores hagan de la aplicación.&#10;                                &#10;                                8. CAMBIOS A ESTA POLÍTICA&#10;                                Podemos actualizar esta política periódicamente. Le notificaremos sobre cambios significativos mediante la aplicación.&#10;                                &#10;                                9. COOKIES Y TECNOLOGÍAS SIMILARES&#10;                                EcoHand no utiliza cookies. Toda la información se almacena localmente en su dispositivo.&#10;                                &#10;                                10. CONTACTO&#10;                                Si tiene preguntas sobre esta política de privacidad, puede contactarnos a través de la sección de Ayuda y Soporte.&#10;                                &#10;                                Al usar EcoHand, usted acepta esta Política de Privacidad.&#10;                            &quot;&quot;&quot;.trimIndent(),&#10;                            fontSize = 13.sp,&#10;                            textAlign = androidx.compose.ui.text.style.TextAlign.Justify&#10;                        )&#10;                    }&#10;                }&#10;            },&#10;            confirmButton = {&#10;                TextButton(onClick = { showPoliticaDialog = false }) {&#10;                    Text(&quot;Aceptar&quot;)&#10;                }&#10;            }&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;fun ConfiguracionItemSwitch(&#10;    icon: ImageVector,&#10;    titulo: String,&#10;    subtitulo: String,&#10;    checked: Boolean,&#10;    onCheckedChange: (Boolean) -&gt; Unit,&#10;    enabled: Boolean = true&#10;) {&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        shape = RoundedCornerShape(12.dp),&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = MaterialTheme.colorScheme.surface&#10;        ),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(16.dp),&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Icon(&#10;                imageVector = icon,&#10;                contentDescription = titulo,&#10;                tint = if (enabled) MaterialTheme.colorScheme.primary else MaterialTheme.colorScheme.onSurfaceVariant,&#10;                modifier = Modifier.size(24.dp)&#10;            )&#10;&#10;            Spacer(modifier = Modifier.width(16.dp))&#10;&#10;            Column(&#10;                modifier = Modifier.weight(1f)&#10;            ) {&#10;                Text(&#10;                    text = titulo,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Medium,&#10;                    color = if (enabled) MaterialTheme.colorScheme.onSurface else MaterialTheme.colorScheme.onSurfaceVariant&#10;                )&#10;                Text(&#10;                    text = subtitulo,&#10;                    fontSize = 12.sp,&#10;                    color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                )&#10;            }&#10;&#10;            Switch(&#10;                checked = checked,&#10;                onCheckedChange = onCheckedChange,&#10;                enabled = enabled&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun ConfiguracionItemClick(&#10;    icon: ImageVector,&#10;    titulo: String,&#10;    subtitulo: String,&#10;    onClick: () -&gt; Unit,&#10;    tintColor: androidx.compose.ui.graphics.Color = MaterialTheme.colorScheme.primary&#10;) {&#10;    Card(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .clickable(onClick = onClick),&#10;        shape = RoundedCornerShape(12.dp),&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = MaterialTheme.colorScheme.surface&#10;        ),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(16.dp),&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Icon(&#10;                imageVector = icon,&#10;                contentDescription = titulo,&#10;                tint = tintColor,&#10;                modifier = Modifier.size(24.dp)&#10;            )&#10;&#10;            Spacer(modifier = Modifier.width(16.dp))&#10;&#10;            Column(&#10;                modifier = Modifier.weight(1f)&#10;            ) {&#10;                Text(&#10;                    text = titulo,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Medium,&#10;                    color = MaterialTheme.colorScheme.onSurface&#10;                )&#10;                Text(&#10;                    text = subtitulo,&#10;                    fontSize = 12.sp,&#10;                    color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                )&#10;            }&#10;&#10;            Icon(&#10;                imageVector = Icons.Default.KeyboardArrowRight,&#10;                contentDescription = &quot;Navegar&quot;,&#10;                tint = MaterialTheme.colorScheme.onSurfaceVariant&#10;            )&#10;        }&#10;    }&#10;}" />
              <option name="updatedContent" value="package com.example.ecohand.presentation.perfil&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.vector.ImageVector&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.input.PasswordVisualTransformation&#10;import androidx.compose.ui.text.input.VisualTransformation&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import com.example.ecohand.data.local.database.EcoHandDatabase&#10;import com.example.ecohand.data.session.UserSession&#10;import kotlinx.coroutines.Dispatchers&#10;import kotlinx.coroutines.launch&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun ConfiguracionScreen(&#10;    onNavigateBack: () -&gt; Unit,&#10;    onLogout: () -&gt; Unit = {}&#10;) {&#10;    val context = LocalContext.current&#10;    val userSession = remember { UserSession.getInstance(context) }&#10;    val database = remember { EcoHandDatabase.getDatabase(context) }&#10;    val scope = rememberCoroutineScope()&#10;&#10;    var notificacionesActivas by remember { mutableStateOf(true) }&#10;    var sonidoActivo by remember { mutableStateOf(true) }&#10;    var vibracionActiva by remember { mutableStateOf(true) }&#10;    var showLogoutDialog by remember { mutableStateOf(false) }&#10;    var showVersionDialog by remember { mutableStateOf(false) }&#10;    var showTerminosDialog by remember { mutableStateOf(false) }&#10;    var showPoliticaDialog by remember { mutableStateOf(false) }&#10;    var showCambiarPasswordDialog by remember { mutableStateOf(false) }&#10;&#10;    // Estados para cambiar contraseña&#10;    var passwordActual by remember { mutableStateOf(&quot;&quot;) }&#10;    var passwordNueva by remember { mutableStateOf(&quot;&quot;) }&#10;    var passwordConfirmar by remember { mutableStateOf(&quot;&quot;) }&#10;    var passwordError by remember { mutableStateOf&lt;String?&gt;(null) }&#10;    var passwordSuccess by remember { mutableStateOf(false) }&#10;    var isChangingPassword by remember { mutableStateOf(false) }&#10;&#10;    // Para mostrar/ocultar contraseñas&#10;    var showPasswordActual by remember { mutableStateOf(false) }&#10;    var showPasswordNueva by remember { mutableStateOf(false) }&#10;    var showPasswordConfirmar by remember { mutableStateOf(false) }&#10;&#10;    Scaffold(&#10;        topBar = {&#10;            TopAppBar(&#10;                title = {&#10;                    Text(&#10;                        text = &quot;Configuración&quot;,&#10;                        fontWeight = FontWeight.Bold&#10;                    )&#10;                },&#10;                navigationIcon = {&#10;                    IconButton(onClick = onNavigateBack) {&#10;                        Icon(&#10;                            imageVector = Icons.Default.ArrowBack,&#10;                            contentDescription = &quot;Volver&quot;&#10;                        )&#10;                    }&#10;                },&#10;                colors = TopAppBarDefaults.topAppBarColors(&#10;                    containerColor = MaterialTheme.colorScheme.primary,&#10;                    titleContentColor = MaterialTheme.colorScheme.onPrimary,&#10;                    navigationIconContentColor = MaterialTheme.colorScheme.onPrimary&#10;                )&#10;            )&#10;        }&#10;    ) { paddingValues -&gt;&#10;        LazyColumn(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(paddingValues)&#10;                .background(MaterialTheme.colorScheme.background)&#10;                .padding(16.dp),&#10;            verticalArrangement = Arrangement.spacedBy(12.dp)&#10;        ) {&#10;            // Sección: General&#10;            item {&#10;                Text(&#10;                    text = &quot;General&quot;,&#10;                    fontSize = 18.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = MaterialTheme.colorScheme.primary,&#10;                    modifier = Modifier.padding(vertical = 8.dp)&#10;                )&#10;            }&#10;&#10;            item {&#10;                ConfiguracionItemSwitch(&#10;                    icon = Icons.Default.Notifications,&#10;                    titulo = &quot;Notificaciones&quot;,&#10;                    subtitulo = &quot;Recibe recordatorios de práctica&quot;,&#10;                    checked = notificacionesActivas,&#10;                    onCheckedChange = { notificacionesActivas = it }&#10;                )&#10;            }&#10;&#10;            item {&#10;                ConfiguracionItemSwitch(&#10;                    icon = Icons.Default.AccountCircle,&#10;                    titulo = &quot;Sonido&quot;,&#10;                    subtitulo = &quot;Efectos de sonido en la app&quot;,&#10;                    checked = sonidoActivo,&#10;                    onCheckedChange = { sonidoActivo = it }&#10;                )&#10;            }&#10;&#10;            item {&#10;                ConfiguracionItemSwitch(&#10;                    icon = Icons.Default.Phone,&#10;                    titulo = &quot;Vibración&quot;,&#10;                    subtitulo = &quot;Vibración al interactuar&quot;,&#10;                    checked = vibracionActiva,&#10;                    onCheckedChange = { vibracionActiva = it }&#10;                )&#10;            }&#10;&#10;&#10;            // Sección: Cuenta&#10;            item {&#10;                Text(&#10;                    text = &quot;Cuenta&quot;,&#10;                    fontSize = 18.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = MaterialTheme.colorScheme.primary,&#10;                    modifier = Modifier.padding(top = 16.dp, bottom = 8.dp)&#10;                )&#10;            }&#10;&#10;            item {&#10;                ConfiguracionItemClick(&#10;                    icon = Icons.Default.Lock,&#10;                    titulo = &quot;Cambiar Contraseña&quot;,&#10;                    subtitulo = &quot;Actualiza tu contraseña&quot;,&#10;                    onClick = {&#10;                        showCambiarPasswordDialog = true&#10;                        // Resetear campos&#10;                        passwordActual = &quot;&quot;&#10;                        passwordNueva = &quot;&quot;&#10;                        passwordConfirmar = &quot;&quot;&#10;                        passwordError = null&#10;                        passwordSuccess = false&#10;                    }&#10;                )&#10;            }&#10;&#10;            item {&#10;                ConfiguracionItemClick(&#10;                    icon = Icons.Default.Delete,&#10;                    titulo = &quot;Eliminar Cuenta&quot;,&#10;                    subtitulo = &quot;Eliminar permanentemente tu cuenta&quot;,&#10;                    onClick = { /* TODO: Implementar eliminación de cuenta */ },&#10;                    tintColor = MaterialTheme.colorScheme.error&#10;                )&#10;            }&#10;&#10;            // Sección: Sobre&#10;            item {&#10;                Text(&#10;                    text = &quot;Sobre la App&quot;,&#10;                    fontSize = 18.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = MaterialTheme.colorScheme.primary,&#10;                    modifier = Modifier.padding(top = 16.dp, bottom = 8.dp)&#10;                )&#10;            }&#10;&#10;            item {&#10;                ConfiguracionItemClick(&#10;                    icon = Icons.Default.Info,&#10;                    titulo = &quot;Versión&quot;,&#10;                    subtitulo = &quot;1.0.0&quot;,&#10;                    onClick = { showVersionDialog = true }&#10;                )&#10;            }&#10;&#10;            item {&#10;                ConfiguracionItemClick(&#10;                    icon = Icons.Default.Star,&#10;                    titulo = &quot;Términos y Condiciones&quot;,&#10;                    subtitulo = &quot;Lee nuestros términos de uso&quot;,&#10;                    onClick = { showTerminosDialog = true }&#10;                )&#10;            }&#10;&#10;            item {&#10;                ConfiguracionItemClick(&#10;                    icon = Icons.Default.Star,&#10;                    titulo = &quot;Política de Privacidad&quot;,&#10;                    subtitulo = &quot;Lee nuestra política de privacidad&quot;,&#10;                    onClick = { showPoliticaDialog = true }&#10;                )&#10;            }&#10;&#10;            // Botón Cerrar Sesión&#10;            item {&#10;                Spacer(modifier = Modifier.height(16.dp))&#10;&#10;                Button(&#10;                    onClick = { showLogoutDialog = true },&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .height(56.dp),&#10;                    colors = ButtonDefaults.buttonColors(&#10;                        containerColor = MaterialTheme.colorScheme.error&#10;                    ),&#10;                    shape = RoundedCornerShape(12.dp)&#10;                ) {&#10;                    Icon(&#10;                        imageVector = Icons.Default.ExitToApp,&#10;                        contentDescription = &quot;Cerrar Sesión&quot;,&#10;                        modifier = Modifier.size(20.dp)&#10;                    )&#10;                    Spacer(modifier = Modifier.width(8.dp))&#10;                    Text(&#10;                        text = &quot;Cerrar Sesión&quot;,&#10;                        fontSize = 16.sp,&#10;                        fontWeight = FontWeight.Bold&#10;                    )&#10;                }&#10;            }&#10;&#10;            item {&#10;                Spacer(modifier = Modifier.height(16.dp))&#10;            }&#10;        }&#10;    }&#10;&#10;    // Dialog de confirmación para cerrar sesión&#10;    if (showLogoutDialog) {&#10;        AlertDialog(&#10;            onDismissRequest = { showLogoutDialog = false },&#10;            title = {&#10;                Text(&#10;                    text = &quot;Cerrar Sesión&quot;,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;            },&#10;            text = {&#10;                Text(&quot;¿Estás seguro que deseas cerrar sesión?&quot;)&#10;            },&#10;            confirmButton = {&#10;                TextButton(&#10;                    onClick = {&#10;                        userSession.clearSession()&#10;                        showLogoutDialog = false&#10;                        onLogout()&#10;                    }&#10;                ) {&#10;                    Text(&quot;Cerrar Sesión&quot;, color = MaterialTheme.colorScheme.error)&#10;                }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = { showLogoutDialog = false }) {&#10;                    Text(&quot;Cancelar&quot;)&#10;                }&#10;            }&#10;        )&#10;    }&#10;&#10;    // Dialog de cambiar contraseña&#10;    if (showCambiarPasswordDialog) {&#10;        AlertDialog(&#10;            onDismissRequest = {&#10;                if (!isChangingPassword) {&#10;                    showCambiarPasswordDialog = false&#10;                    passwordActual = &quot;&quot;&#10;                    passwordNueva = &quot;&quot;&#10;                    passwordConfirmar = &quot;&quot;&#10;                    passwordError = null&#10;                    passwordSuccess = false&#10;                }&#10;            },&#10;            title = {&#10;                Text(&#10;                    text = &quot;Cambiar Contraseña&quot;,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;            },&#10;            text = {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .heightIn(max = 400.dp),&#10;                    verticalArrangement = Arrangement.spacedBy(12.dp)&#10;                ) {&#10;                    if (passwordSuccess) {&#10;                        // Mensaje de éxito&#10;                        Column(&#10;                            modifier = Modifier.fillMaxWidth(),&#10;                            horizontalAlignment = Alignment.CenterHorizontally&#10;                        ) {&#10;                            Text(&#10;                                text = &quot;✅&quot;,&#10;                                fontSize = 48.sp&#10;                            )&#10;                            Spacer(modifier = Modifier.height(8.dp))&#10;                            Text(&#10;                                text = &quot;Contraseña actualizada exitosamente&quot;,&#10;                                fontSize = 16.sp,&#10;                                fontWeight = FontWeight.Medium,&#10;                                textAlign = androidx.compose.ui.text.style.TextAlign.Center,&#10;                                color = MaterialTheme.colorScheme.primary&#10;                            )&#10;                        }&#10;                    } else {&#10;                        // Campos de contraseña&#10;                        Text(&#10;                            text = &quot;Ingresa tu contraseña actual y la nueva contraseña&quot;,&#10;                            fontSize = 14.sp,&#10;                            color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                        )&#10;&#10;                        // Contraseña actual&#10;                        OutlinedTextField(&#10;                            value = passwordActual,&#10;                            onValueChange = {&#10;                                passwordActual = it&#10;                                passwordError = null&#10;                            },&#10;                            label = { Text(&quot;Contraseña Actual&quot;) },&#10;                            placeholder = { Text(&quot;Ingresa tu contraseña actual&quot;) },&#10;                            visualTransformation = if (showPasswordActual)&#10;                                VisualTransformation.None&#10;                            else&#10;                                PasswordVisualTransformation(),&#10;                            keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Password),&#10;                            trailingIcon = {&#10;                                IconButton(onClick = { showPasswordActual = !showPasswordActual }) {&#10;                                    Icon(&#10;                                        imageVector = if (showPasswordActual)&#10;                                            Icons.Default.Person&#10;                                        else&#10;                                            Icons.Default.Lock,&#10;                                        contentDescription = if (showPasswordActual)&#10;                                            &quot;Ocultar contraseña&quot;&#10;                                        else&#10;                                            &quot;Mostrar contraseña&quot;&#10;                                    )&#10;                                }&#10;                            },&#10;                            modifier = Modifier.fillMaxWidth(),&#10;                            enabled = !isChangingPassword,&#10;                            singleLine = true&#10;                        )&#10;&#10;                        // Nueva contraseña&#10;                        OutlinedTextField(&#10;                            value = passwordNueva,&#10;                            onValueChange = {&#10;                                passwordNueva = it&#10;                                passwordError = null&#10;                            },&#10;                            label = { Text(&quot;Nueva Contraseña&quot;) },&#10;                            placeholder = { Text(&quot;Ingresa la nueva contraseña&quot;) },&#10;                            visualTransformation = if (showPasswordNueva)&#10;                                VisualTransformation.None&#10;                            else&#10;                                PasswordVisualTransformation(),&#10;                            keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Password),&#10;                            trailingIcon = {&#10;                                IconButton(onClick = { showPasswordNueva = !showPasswordNueva }) {&#10;                                    Icon(&#10;                                        imageVector = if (showPasswordNueva)&#10;                                            Icons.Default.Person&#10;                                        else&#10;                                            Icons.Default.Lock,&#10;                                        contentDescription = if (showPasswordNueva)&#10;                                            &quot;Ocultar contraseña&quot;&#10;                                        else&#10;                                            &quot;Mostrar contraseña&quot;&#10;                                    )&#10;                                }&#10;                            },&#10;                            modifier = Modifier.fillMaxWidth(),&#10;                            enabled = !isChangingPassword,&#10;                            singleLine = true&#10;                        )&#10;&#10;                        // Confirmar nueva contraseña&#10;                        OutlinedTextField(&#10;                            value = passwordConfirmar,&#10;                            onValueChange = {&#10;                                passwordConfirmar = it&#10;                                passwordError = null&#10;                            },&#10;                            label = { Text(&quot;Confirmar Nueva Contraseña&quot;) },&#10;                            placeholder = { Text(&quot;Confirma la nueva contraseña&quot;) },&#10;                            visualTransformation = if (showPasswordConfirmar)&#10;                                VisualTransformation.None&#10;                            else&#10;                                PasswordVisualTransformation(),&#10;                            keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Password),&#10;                            trailingIcon = {&#10;                                IconButton(onClick = { showPasswordConfirmar = !showPasswordConfirmar }) {&#10;                                    Icon(&#10;                                        imageVector = if (showPasswordConfirmar)&#10;                                            Icons.Default.Person&#10;                                        else&#10;                                            Icons.Default.Lock,&#10;                                        contentDescription = if (showPasswordConfirmar)&#10;                                            &quot;Ocultar contraseña&quot;&#10;                                        else&#10;                                            &quot;Mostrar contraseña&quot;&#10;                                    )&#10;                                }&#10;                            },&#10;                            modifier = Modifier.fillMaxWidth(),&#10;                            enabled = !isChangingPassword,&#10;                            singleLine = true&#10;                        )&#10;&#10;                        // Mensaje de error&#10;                        passwordError?.let { error -&gt;&#10;                            Text(&#10;                                text = error,&#10;                                color = MaterialTheme.colorScheme.error,&#10;                                fontSize = 13.sp,&#10;                                modifier = Modifier.fillMaxWidth()&#10;                            )&#10;                        }&#10;&#10;                        // Indicador de progreso&#10;                        if (isChangingPassword) {&#10;                            LinearProgressIndicator(&#10;                                modifier = Modifier.fillMaxWidth()&#10;                            )&#10;                        }&#10;                    }&#10;                }&#10;            },&#10;            confirmButton = {&#10;                if (passwordSuccess) {&#10;                    TextButton(&#10;                        onClick = {&#10;                            showCambiarPasswordDialog = false&#10;                            passwordActual = &quot;&quot;&#10;                            passwordNueva = &quot;&quot;&#10;                            passwordConfirmar = &quot;&quot;&#10;                            passwordError = null&#10;                            passwordSuccess = false&#10;                        }&#10;                    ) {&#10;                        Text(&quot;Cerrar&quot;)&#10;                    }&#10;                } else {&#10;                    TextButton(&#10;                        onClick = {&#10;                            // Validaciones&#10;                            when {&#10;                                passwordActual.isEmpty() -&gt; {&#10;                                    passwordError = &quot;Ingresa tu contraseña actual&quot;&#10;                                }&#10;                                passwordNueva.isEmpty() -&gt; {&#10;                                    passwordError = &quot;Ingresa la nueva contraseña&quot;&#10;                                }&#10;                                passwordNueva.length &lt; 6 -&gt; {&#10;                                    passwordError = &quot;La contraseña debe tener al menos 6 caracteres&quot;&#10;                                }&#10;                                passwordConfirmar.isEmpty() -&gt; {&#10;                                    passwordError = &quot;Confirma la nueva contraseña&quot;&#10;                                }&#10;                                passwordNueva != passwordConfirmar -&gt; {&#10;                                    passwordError = &quot;Las contraseñas no coinciden&quot;&#10;                                }&#10;                                passwordActual == passwordNueva -&gt; {&#10;                                    passwordError = &quot;La nueva contraseña debe ser diferente a la actual&quot;&#10;                                }&#10;                                else -&gt; {&#10;                                    // Validar contraseña actual y actualizar&#10;                                    isChangingPassword = true&#10;                                    passwordError = null&#10;&#10;                                    scope.launch(Dispatchers.IO) {&#10;                                        try {&#10;                                            val userId = userSession.getUserId()&#10;                                            val user = database.userDao().getUserById(userId)&#10;&#10;                                            if (user != null) {&#10;                                                // Verificar contraseña actual&#10;                                                if (user.password == passwordActual) {&#10;                                                    // Actualizar contraseña&#10;                                                    val updatedUser = user.copy(password = passwordNueva)&#10;                                                    database.userDao().updateUser(updatedUser)&#10;&#10;                                                    // Mostrar mensaje de éxito&#10;                                                    launch(Dispatchers.Main) {&#10;                                                        passwordSuccess = true&#10;                                                        isChangingPassword = false&#10;                                                    }&#10;                                                } else {&#10;                                                    // Contraseña actual incorrecta&#10;                                                    launch(Dispatchers.Main) {&#10;                                                        passwordError = &quot;La contraseña actual es incorrecta&quot;&#10;                                                        isChangingPassword = false&#10;                                                    }&#10;                                                }&#10;                                            } else {&#10;                                                launch(Dispatchers.Main) {&#10;                                                    passwordError = &quot;Error: Usuario no encontrado&quot;&#10;                                                    isChangingPassword = false&#10;                                                }&#10;                                            }&#10;                                        } catch (e: Exception) {&#10;                                            launch(Dispatchers.Main) {&#10;                                                passwordError = &quot;Error al cambiar contraseña: ${e.message}&quot;&#10;                                                isChangingPassword = false&#10;                                            }&#10;                                        }&#10;                                    }&#10;                                }&#10;                            }&#10;                        },&#10;                        enabled = !isChangingPassword&#10;                    ) {&#10;                        Text(&quot;Cambiar&quot;)&#10;                    }&#10;                }&#10;            },&#10;            dismissButton = {&#10;                if (!passwordSuccess) {&#10;                    TextButton(&#10;                        onClick = {&#10;                            showCambiarPasswordDialog = false&#10;                            passwordActual = &quot;&quot;&#10;                            passwordNueva = &quot;&quot;&#10;                            passwordConfirmar = &quot;&quot;&#10;                            passwordError = null&#10;                            passwordSuccess = false&#10;                        },&#10;                        enabled = !isChangingPassword&#10;                    ) {&#10;                        Text(&quot;Cancelar&quot;)&#10;                    }&#10;                }&#10;            }&#10;        )&#10;    }&#10;&#10;    // Dialog de información de versión&#10;    if (showVersionDialog) {&#10;        AlertDialog(&#10;            onDismissRequest = { showVersionDialog = false },&#10;            title = {&#10;                Column(&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    modifier = Modifier.fillMaxWidth()&#10;                ) {&#10;                    Text(&#10;                        text = &quot;&quot;,&#10;                        fontSize = 48.sp&#10;                    )&#10;                    Spacer(modifier = Modifier.height(8.dp))&#10;                    Text(&#10;                        text = &quot;EcoHand&quot;,&#10;                        fontWeight = FontWeight.Bold,&#10;                        fontSize = 24.sp&#10;                    )&#10;                }&#10;            },&#10;            text = {&#10;                Column {&#10;                    Text(&#10;                        text = &quot;Versión: 1.0.0&quot;,&#10;                        fontSize = 16.sp,&#10;                        fontWeight = FontWeight.Medium,&#10;                        modifier = Modifier.padding(vertical = 4.dp)&#10;                    )&#10;                    Text(&#10;                        text = &quot;Fecha de lanzamiento: Noviembre 2024&quot;,&#10;                        fontSize = 14.sp,&#10;                        color = MaterialTheme.colorScheme.onSurfaceVariant,&#10;                        modifier = Modifier.padding(vertical = 4.dp)&#10;                    )&#10;                    Spacer(modifier = Modifier.height(8.dp))&#10;                    Text(&#10;                        text = &quot;EcoHand es una aplicación educativa para aprender Lengua de Señas Peruana (LSP) de forma interactiva y divertida.&quot;,&#10;                        fontSize = 14.sp,&#10;                        textAlign = androidx.compose.ui.text.style.TextAlign.Justify&#10;                    )&#10;                    Spacer(modifier = Modifier.height(8.dp))&#10;                    Text(&#10;                        text = &quot;© 2024 EcoHand Team&quot;,&#10;                        fontSize = 12.sp,&#10;                        color = MaterialTheme.colorScheme.onSurfaceVariant,&#10;                        fontStyle = androidx.compose.ui.text.font.FontStyle.Italic&#10;                    )&#10;                }&#10;            },&#10;            confirmButton = {&#10;                TextButton(onClick = { showVersionDialog = false }) {&#10;                    Text(&quot;Cerrar&quot;)&#10;                }&#10;            }&#10;        )&#10;    }&#10;&#10;    // Dialog de Términos y Condiciones&#10;    if (showTerminosDialog) {&#10;        AlertDialog(&#10;            onDismissRequest = { showTerminosDialog = false },&#10;            title = {&#10;                Text(&#10;                    text = &quot;Términos y Condiciones&quot;,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;            },&#10;            text = {&#10;                LazyColumn(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .heightIn(max = 400.dp)&#10;                ) {&#10;                    item {&#10;                        Text(&#10;                            text = &quot;&quot;&quot;&#10;                                TÉRMINOS Y CONDICIONES DE USO DE ECOHAND&#10;                                &#10;                                Última actualización: Noviembre 2024&#10;                                &#10;                                1. ACEPTACIÓN DE LOS TÉRMINOS&#10;                                Al descargar, instalar o usar la aplicación EcoHand, usted acepta estar sujeto a estos Términos y Condiciones. Si no está de acuerdo con estos términos, por favor no use la aplicación.&#10;                                &#10;                                2. USO DE LA APLICACIÓN&#10;                                EcoHand es una aplicación educativa diseñada para el aprendizaje de la Lengua de Señas Peruana (LSP). El usuario se compromete a:&#10;                                • Usar la aplicación solo con fines educativos&#10;                                • No realizar ingeniería inversa del software&#10;                                • No compartir su cuenta con terceros&#10;                                • Proporcionar información veraz al registrarse&#10;                                &#10;                                3. PROPIEDAD INTELECTUAL&#10;                                Todo el contenido de EcoHand, incluyendo pero no limitado a textos, gráficos, logos, videos, y software, es propiedad de EcoHand Team y está protegido por las leyes de propiedad intelectual.&#10;                                &#10;                                4. PRIVACIDAD&#10;                                EcoHand respeta su privacidad. Los datos recopilados se utilizan únicamente para mejorar la experiencia del usuario y el funcionamiento de la aplicación. No compartimos información personal con terceros.&#10;                                &#10;                                5. MODIFICACIONES&#10;                                Nos reservamos el derecho de modificar estos términos en cualquier momento. Los cambios entrarán en vigor inmediatamente después de su publicación en la aplicación.&#10;                                &#10;                                6. LIMITACIÓN DE RESPONSABILIDAD&#10;                                EcoHand se proporciona &quot;tal cual&quot; sin garantías de ningún tipo. No nos hacemos responsables de daños directos o indirectos derivados del uso de la aplicación.&#10;                                &#10;                                7. CONTACTO&#10;                                Para cualquier pregunta sobre estos términos, contáctenos a través de la sección de Ayuda y Soporte en la aplicación.&#10;                            &quot;&quot;&quot;.trimIndent(),&#10;                            fontSize = 13.sp,&#10;                            textAlign = androidx.compose.ui.text.style.TextAlign.Justify&#10;                        )&#10;                    }&#10;                }&#10;            },&#10;            confirmButton = {&#10;                TextButton(onClick = { showTerminosDialog = false }) {&#10;                    Text(&quot;Aceptar&quot;)&#10;                }&#10;            }&#10;        )&#10;    }&#10;&#10;    // Dialog de Política de Privacidad&#10;    if (showPoliticaDialog) {&#10;        AlertDialog(&#10;            onDismissRequest = { showPoliticaDialog = false },&#10;            title = {&#10;                Text(&#10;                    text = &quot;Política de Privacidad&quot;,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;            },&#10;            text = {&#10;                LazyColumn(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .heightIn(max = 400.dp)&#10;                ) {&#10;                    item {&#10;                        Text(&#10;                            text = &quot;&quot;&quot;&#10;                                POLÍTICA DE PRIVACIDAD DE ECOHAND&#10;                                &#10;                                Última actualización: Noviembre 2024&#10;                                &#10;                                1. INFORMACIÓN QUE RECOPILAMOS&#10;                                EcoHand recopila la siguiente información:&#10;                                • Información de cuenta: nombre de usuario, correo electrónico&#10;                                • Datos de progreso: lecciones completadas, puntuaciones, logros&#10;                                • Datos de uso: tiempo de uso, frecuencia de acceso&#10;                                &#10;                                2. CÓMO USAMOS SU INFORMACIÓN&#10;                                Utilizamos la información recopilada para:&#10;                                • Proporcionar y mejorar nuestros servicios&#10;                                • Personalizar su experiencia de aprendizaje&#10;                                • Hacer seguimiento de su progreso&#10;                                • Enviar notificaciones relevantes (si está habilitado)&#10;                                • Analizar el uso de la aplicación para mejoras&#10;                                &#10;                                3. ALMACENAMIENTO DE DATOS&#10;                                Sus datos se almacenan de forma segura en el dispositivo local. La información se mantiene encriptada y protegida mediante las medidas de seguridad estándar de la industria.&#10;                                &#10;                                4. COMPARTIR INFORMACIÓN&#10;                                NO compartimos, vendemos ni alquilamos su información personal a terceros. Sus datos son privados y permanecen en su dispositivo.&#10;                                &#10;                                5. SEGURIDAD&#10;                                Implementamos medidas de seguridad técnicas y organizativas para proteger su información contra acceso no autorizado, alteración, divulgación o destrucción.&#10;                                &#10;                                6. DERECHOS DEL USUARIO&#10;                                Usted tiene derecho a:&#10;                                • Acceder a su información personal&#10;                                • Corregir datos inexactos&#10;                                • Eliminar su cuenta y datos asociados&#10;                                • Exportar sus datos de progreso&#10;                                &#10;                                7. DATOS DE MENORES&#10;                                EcoHand puede ser usado por menores de edad bajo supervisión de un adulto. Los padres o tutores son responsables del uso que los menores hagan de la aplicación.&#10;                                &#10;                                8. CAMBIOS A ESTA POLÍTICA&#10;                                Podemos actualizar esta política periódicamente. Le notificaremos sobre cambios significativos mediante la aplicación.&#10;                                &#10;                                9. COOKIES Y TECNOLOGÍAS SIMILARES&#10;                                EcoHand no utiliza cookies. Toda la información se almacena localmente en su dispositivo.&#10;                                &#10;                                10. CONTACTO&#10;                                Si tiene preguntas sobre esta política de privacidad, puede contactarnos a través de la sección de Ayuda y Soporte.&#10;                                &#10;                                Al usar EcoHand, usted acepta esta Política de Privacidad.&#10;                            &quot;&quot;&quot;.trimIndent(),&#10;                            fontSize = 13.sp,&#10;                            textAlign = androidx.compose.ui.text.style.TextAlign.Justify&#10;                        )&#10;                    }&#10;                }&#10;            },&#10;            confirmButton = {&#10;                TextButton(onClick = { showPoliticaDialog = false }) {&#10;                    Text(&quot;Aceptar&quot;)&#10;                }&#10;            }&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;fun ConfiguracionItemSwitch(&#10;    icon: ImageVector,&#10;    titulo: String,&#10;    subtitulo: String,&#10;    checked: Boolean,&#10;    onCheckedChange: (Boolean) -&gt; Unit,&#10;    enabled: Boolean = true&#10;) {&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        shape = RoundedCornerShape(12.dp),&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = MaterialTheme.colorScheme.surface&#10;        ),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(16.dp),&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Icon(&#10;                imageVector = icon,&#10;                contentDescription = titulo,&#10;                tint = if (enabled) MaterialTheme.colorScheme.primary else MaterialTheme.colorScheme.onSurfaceVariant,&#10;                modifier = Modifier.size(24.dp)&#10;            )&#10;&#10;            Spacer(modifier = Modifier.width(16.dp))&#10;&#10;            Column(&#10;                modifier = Modifier.weight(1f)&#10;            ) {&#10;                Text(&#10;                    text = titulo,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Medium,&#10;                    color = if (enabled) MaterialTheme.colorScheme.onSurface else MaterialTheme.colorScheme.onSurfaceVariant&#10;                )&#10;                Text(&#10;                    text = subtitulo,&#10;                    fontSize = 12.sp,&#10;                    color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                )&#10;            }&#10;&#10;            Switch(&#10;                checked = checked,&#10;                onCheckedChange = onCheckedChange,&#10;                enabled = enabled&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun ConfiguracionItemClick(&#10;    icon: ImageVector,&#10;    titulo: String,&#10;    subtitulo: String,&#10;    onClick: () -&gt; Unit,&#10;    tintColor: androidx.compose.ui.graphics.Color = MaterialTheme.colorScheme.primary&#10;) {&#10;    Card(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .clickable(onClick = onClick),&#10;        shape = RoundedCornerShape(12.dp),&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = MaterialTheme.colorScheme.surface&#10;        ),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(16.dp),&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Icon(&#10;                imageVector = icon,&#10;                contentDescription = titulo,&#10;                tint = tintColor,&#10;                modifier = Modifier.size(24.dp)&#10;            )&#10;&#10;            Spacer(modifier = Modifier.width(16.dp))&#10;&#10;            Column(&#10;                modifier = Modifier.weight(1f)&#10;            ) {&#10;                Text(&#10;                    text = titulo,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Medium,&#10;                    color = MaterialTheme.colorScheme.onSurface&#10;                )&#10;                Text(&#10;                    text = subtitulo,&#10;                    fontSize = 12.sp,&#10;                    color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                )&#10;            }&#10;&#10;            Icon(&#10;                imageVector = Icons.Default.KeyboardArrowRight,&#10;                contentDescription = &quot;Navegar&quot;,&#10;                tint = MaterialTheme.colorScheme.onSurfaceVariant&#10;            )&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>